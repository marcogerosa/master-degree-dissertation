% -*- root: dissertation.tex -*-
\chapter{Exemplos de respostas que embasaram os maus cheiros}
\label{appendix:smells-purpose-of-solution}

{
\footnotesize
\begin{longtable}{@{}p{2.5cm}p{14cm}@{}}
\hline
\textbf{Mau Cheiro} & \textbf{Respostas sobre boas e más práticas} \\
\hline
\endhead
\hline
% \caption{Exemplos de frases que embasaram os maus cheiros} \\
\endfoot

\textsc{SML-J1} 	& \textbf{Más práticas:} ``Fazer lógica de negócio [em Activities]''\footnote{Todo texto em inglês foi traduzido livremente ao longo da dissertação} (P16). ``Colocar regra de negócio no Adapter'' (P19). ``Manter lógica de negócio em Fragments'' (P11). \textbf{Boas práticas:} ``Elas [Activities] representam uma única tela e apenas interagem com a UI, qualquer lógica deve ser delegada para outra classe'' (P16). ``Apenas código relacionado à Interface de Usuário nas Activities'' (P23). ``Adapters devem apenas se preocupar sobre como mostrar os dados, sem trabalhá-los'' (P40). \\
\textsc{SML-J2} 	& \textbf{Más práticas:} ``Acoplar o fragment a activity ao invés de utilizar interfaces é uma prática ruim'' (P19). ``Acoplar o Fragment com a Activity'' (P10, P31 e P45). ``Fragments nunca devem tentar falar uns com os outros diretamente'' (P37). ``Integragir com outro Fragment diretamente'' (P45). ``[Listener] conter uma referência direta à Activities'' (P4, P40). ``[Adapters] alto acoplamento com a Activity'' (P10). ``Acessar Activities ou Fragments diretamente'' (P45). \textbf{Boa prática:} ``Seja um componente de UI reutilizável. Então evite dependência de outros componentes da aplicação'' (P6). \\
\textsc{SML-J3} 	& \textbf{Más práticas:} ``Usar muitos anônimos pode ser complicado. Às vezes nomear coisas torna mais fácil para depuração'' (P9). ``Mantenha-os [Listeners] em classes separadas (esqueça sobre classes anônimas)'' (P4). ``Muitas implementações de Listener com classes anônimas'' (P8). ``Declarar como classe interna da Activity ou Fragment ou outro componente que contém um ciclo de vida. Isso pode fazer com que os aplicativos causem vazamentos de memória.'' (P42). ``Eu não gosto quando os desenvolvedores fazem a activity implementar o Listener porque eles [os métodos] serão expostos e qualquer um pode chamá-lo de fora da classe. Eu prefiro instanciar ou então usar ButterKnife para injetar cliques.'' (P44). \textbf{Boas práticas:} ``Prefiro declarar os listeners com \texttt{implements} e sobrescrever os métodos (onClick, por exemplo) do que fazer um set listener no próprio objeto'' (P32). ``Tome cuidade se a Activity/Fragment é um Listener uma vez que eles são destruídos quando as configurações mudam. Isso causa vazamentos de memória.'' (P6). ``Use carregamento automático de view como ButterKnife e injeção de dependência como Dagger2'' (P10). \\
\textsc{SML-J4} 	& \textbf{Más práticas:} ``Não conhecer o enorme e complexo ciclo de vida de Fragment e não lidar com a restauração do estado'' (P42). ``Não commitar fragmentos após o onPause e aprender o ciclo de vida se você quiser usá-los'' (P31). ``Fazer Activities serem callbacks de processos assíncronos gerando memory leaks. Erros ao interpretar o ciclo de vida'' (P28). \\
\textsc{SML-J5} 	& \textbf{Boas práticas:} ``Reutilizar a view utilizando ViewHolder.'' (P36). ``Usar o padrão ViewHolder'' (P39). P45 sugere o uso do RecyclerView, um elemento Android para a construção de listas que já implementa o padrão ViewHolder \cite{AluraViewHolder}. \\
\textsc{SML-J6} 	& \textbf{Má prática:} ``Usar muitos Fragments é uma má prática'' (P2). \textbf{Boas práticas:} ``Evite-os. Use apenas com View Pagers'' (P7). ``Eu tento usar o Fragment para lidar apenas com as visualizações, como a Activity, e eu o uso apenas quando preciso deles em um layout de Tablet ou para reutilizar em outra Activity. Caso contrário, eu não uso'' (P41). \\
\textsc{SML-J7} 	& \textbf{Más práticas:} ``Não usar Fragments'' (P22). ``Usar todas as view (EditTexts, Spinners, etc...) dentro de Activities e não dentro de Fragments'' (P45). \textbf{Boas práticas:} ``Utilizar fragments sempre que possível.'' (P19), ``Use um Fragment para cada tela. Uma Activity para cada aplicativo.'' (P45). \\ 
\textsc{SML-J8} 	& \textbf{Más práticas:} ``[Activities e Fragments] fazerem requests e consultas a banco de dados'' (P26). ``[Adapters] fazerem operações longas e requests de internet'' (P26). \textbf{Boa prática:} ``Elas [Activities] nunca devem fazer acesso a dados'' (P37). \\
\textsc{SML-J9} 	& \textbf{Más práticas:} ``Fazer Activities serem callbacks de processos assíncronos gerando memory leaks. Erros ao interpretar o ciclo de vida'' (P28). ``Ter referência estática para Activities, resultando em vazamento de memória'' (P31). \textbf{Boas práticas:} ``Não manter referências estáticas para Activities (ou classes anônimas criadas dentro delas)'' (P31). ``Deus mata um cachorro toda vez que alguém passa o contexto da Activity para um componente que tem um ciclo de vida independente dela. Vaza memória e deixa todos tristes.'' (P4). \\
\textsc{SML-J10} 	& \textbf{Más práticas:} ``Não usar um design pattern'' (P45). \textbf{Boas práticas:} ``Usar algum modelo de arquitetura para garantir apresentação desacoplada do framework (MVP, MVVM, Clean Architecture, etc)'' (P28). ``Sobre MVP. Eu acho que é o melhor padrão de projeto para usar com Android'' (P45). \\
\textsc{SML-J11} 	& \textbf{Má prática:} ``Reutilizar um mesmo adapter para várias situações diferentes, com \texttt{ifs} ou \texttt{switches}. Código de lógica importante ou cálculos em Adapters.'' (P23). \textbf{Boa prática:} ``Um Adapter deve adaptar um único tipo de item ou delegar a Adapters especializados'' (P2). \\
\textsc{SML-J12} 	& \textbf{Más práticas:} ``De preferência, eles não devem ser aninhados'' (P37). ``Fragments aninhados!'' (P4). \\
\textsc{SML-J13} 	& \textbf{Más práticas:} ``Sobreescrever o comportamento do botão voltar'' (P43). ``Lidar com a pilha do app manualmante'' (P41). \\
\textsc{SML-J14} 	& \textbf{Boas práticas:} ``Apenas separe estes arquivos no diretório "Visualizar" no padrão MVC'' (P12). ``I always put my activities in a package called activities'' (P11).\\

\textsc{SML-R1} 	& \textbf{Más práticas:} ``Strings diretamente no código'' (P23). ``Não extrair as strings e sobre não extrair os valores dos arquivos de layout'' (P31 e P35). \textbf{Boas práticas:} ``Sempre pegar valores de string ou dp de seus respectivos resources para facilitar'' (P7). ``Sempre adicionar as strings em resources para traduzir em diversos idiomas'' (P36). \\
\textsc{SML-R2} 	& \textbf{Más práticas:} ``O nome das strings sem um contexto'' (P8). ``[Sobre Style Resources] Nada além de ter uma boa convenção de nomes'' (P37). ``[Sobre Layout Resource] Mantenha uma convenção de nomes da sua escolha'' (P37). \textbf{Boas práticas:} ``Iniciar o nome de uma string com o nome da tela onde vai ser usada'' (P27).  ``[Sobre Layout Resource] Ter uma boa convenção de nomeação'' (P43). ``[Sobre Style Resource] colocar um bom nome'' (P11). \\
\textsc{SML-R3} 	& \textbf{Más práticas:} ``Hierarquia de views longas'' (P26). ``Estruturas profundamente aninhadas'' (P4). ``Hierarquias desnecessárias'' (P39). ``Criar muitos ViewGroups dentro de ViewGroups'' (P45). \textbf{Boas práticas:} ``Tento usar o mínimo de layout aninhado'' (P4). ``Utilizar o mínimo de camadas possível'' (P19). ``Não fazer uma hierarquia profunda de ViewGroups'' (P8). \\
\textsc{SML-R4} 	& \textbf{Más práticas:} ``Uso de formatos não otimizados, uso de drawables onde recursos padrão do Android seriam preferíveis'' (P23). ``Usar jpg ou png para formas simples é ruim, apenas as desenhe [através de Drawable Resources]'' (P37). \textbf{Boas práticas:} ``Quando possível, criar resources através de xml'' (P36). ``Utilizar o máximo de Vector Drawables que for possível'' (P28). ``Evite muitas imagens, use imagens vetoriais sempre que possível'' (P40).\\ 
\textsc{SML-R5} 	& \textbf{Má prática:} ``Copiar e colar layouts parecidos sem usar includes'' (P41). ``Colocar muitos recursos no mesmo arquivo de layout.'' (P23). \textbf{Boas práticas:} ``Sempre quando posso, estou utilizando includes para algum pedaço de layout semelhante'' (P32). ``Criar layouts que possam ser reutilizados em diversas partes'' (P36). ``Separe um grande layout usando include ou merge'' (P42) \\
\textsc{SML-R6} 	& \textbf{Más práticas:} ``Ter apenas uma imagem para multiplas densidades'' (P31). ``Baixar uma imagem muito grande quando não é necessário. Há melhores formas de usar memória'' (P4). ``Não criar imagens para todas as resoluções'' (P44). \textbf{Boas prática:} ``Nada especial, apenas mantê-las em seus respectivos diretórios e ter variados tamanhos delas'' (P34). ``Criar as pastas para diversas resoluções e colocar as imagens corretas'' (P36). \\ 
\textsc{SML-R7} 	& \textbf{Más práticas:} ``Deixar tudo no mesmo arquivo styles.xml'' (P28). ``Arquivos de estilos grandes'' (P8). \textbf{Boas práticas:} ``Se possível, separar mais além do arquivo styles.xml padrão, já que é possível declarar múltiplos arquivos XML de estilo para a mesma configuração'' (P28). ``Divida-os. Temas e estilos é uma escolha racional'' (P40).\\
\textsc{SML-R8} 	& \textbf{Más práticas:} ``Usar o mesmo arquivo strings.xml para tudo'' (P28). ``Não orgaizar as strings quando o strings.xml começa a ficar grande'' (P42). \textbf{Boas práticas:} ``Separar strings por tela em arquivos XML separados. Extremamente útil para identificar quais strings pertencentes a quais telas em projetos grandes'' (P28). ``Sempre busco separar em blocos, cada bloco representa uma Activity e nunca aproveito uma String pra outra tela'' (P32). \\
\textsc{SML-R9} 	& \textbf{Má prática:} ``Utilizar muitas propriedades em um único componente. Se tiver que usar muitas, prefiro colocar no arquivo de styles.'' (P32). \textbf{Boa prática:}  ``Sempre que eu noto que tenho mais de um recurso usando o mesmo estilo, eu tento movê-lo para o meu style resource.'' (P34).\\ 
\textsc{SML-R10} 	& \textbf{Más práticas:} ``Utilizar uma String pra mais de uma activity, pois se em algum momento, surja a necessidade de trocar em uma, vai afetar outra.'' (P32). ``Reutilizar a string em várias telas'' (P6) ``Reutilizar a string apenas porque o texto coincide, tenha cuidado com a semântica'' (P40). \textbf{Boas prática:} ``Sempre busco separar em blocos, cada bloco representa uma activity e nunca aproveito uma String pra outra tela.'' (P32). ``Não tenha medo de repetir strings [...]'' (P9). \\
\textsc{SML-R11} 	& \textbf{Más práticas:} ``Nunca crie um listener dentro do XML. Isso esconde o listener de outros desenvolvedores e pode causar problemas até que ele seja encontrado'' (P34, P39 e P41). \textbf{Boa prática:} ``XML de layout deve lidar apenas com a view e não com ações'' (P41). \\

% \textsc{Lógica Em Classes de UI}				& ``[É má prática] fazer lógica de negócio [em Activities]''\footnote{Todo texto em inglês foi traduzido livremente ao longo da dissertação} (P16). ``Colocar regra de negócio no Adapter'' (P19). ``Manter lógica de negócio em Fragments'' (P11). ``Elas [Activities] representam uma única tela e apenas interagem com a UI, qualquer lógica deve ser delegada para outra classe'' (P16). ``Apenas código relacionado à Interface de Usuário nas Activities'' (P23). ``Adapters devem apenas se preocupar sobre como mostrar os dados, sem trabalhá-los'' (P40). \\
% \textsc{Classes de UI Acopladas}           		& ``Acoplar o fragment a activity ao invés de utilizar interfaces é uma prática ruim'' (P19). ``[É má prática] acoplar o Fragment com a Activity'' (P10, P31 e P45). ``Fragments nunca devem tentar falar uns com os outros diretamente'' (P37). ``[É má prática] integragir com outro Fragment diretamente'' (P45). ``Seja um componente de UI reutilizável. Então evite dependência de outros componentes da aplicação'' (P6). ``[É má prática o Listener] conter uma referência direta à Activities'' (P4, P40). ``[É má prática em Adapters] alto acoplamento com a Activity'' (P10). ``[É má prática] acessar Activities ou Fragments diretamente'' (P45). \\
% \textsc{Comportamento Suspeito}            		& ``Usar muitos anônimos pode ser complicado. Às vezes nomear coisas torna mais fácil para depuração'' (P9). ``Mantenha-os [Listeners] em classes separadas (esqueça sobre classes anônimas)'' (P4). ``Prefiro declarar os listeners com \texttt{implements} e sobrescrever os métodos (onClick, por exemplo) do que fazer um set listener no próprio objeto'' (P32). ``[É má prática] muitas implementações de Listener com classes anônimas'' (P8). ``Declarar como classe interna da Activity ou Fragment ou outro componente que contém um ciclo de vida. Isso pode fazer com que os aplicativos causem vazamentos de memória.'' (P42). ``Eu não gosto quando os desenvolvedores fazem a activity implementar o Listener porque eles [os métodos] serão expostos e qualquer um pode chamá-lo de fora da classe. Eu prefiro instanciar ou então usar ButterKnife para injetar cliques.'' (P44). ``Tome cuidade se a Activity/Fragment é um Listener uma vez que eles são destruídos quando as configurações mudam. Isso causa vazamentos de memória.'' (P6). ``Use carregamento automático de view como ButterKnife e injeção de dependência como Dagger2'' (P10). \\
% \textsc{Mau Uso do Ciclo de Vida}          		& ``Não conhecer o enorme e complexo ciclo de vida de Fragment e não lidar com a restauração do estado'' (P42). ``Não commitar fragmentos após o onPause e aprender o ciclo de vida se você quiser usá-los'' (P31). ``Fazer Activities serem callbacks de processos assíncronos gerando memory leaks. Erros ao interpretar o ciclo de vida'' (P28). \\
% \textsc{Não Uso de Padrão View Holder}     		& ``Reutilizar a view utilizando ViewHolder.'' (P36). ``Usar o padrão ViewHolder'' (P39). P45 sugere o uso do RecyclerView, um elemento Android para a construção de listas que já implementa o padrão ViewHolder \cite{AluraViewHolder}. \\
% \textsc{Uso Excessivo de Fragment}         		& ``Usar muitos Fragments é uma má prática'' (P2). ``Evite-os. Use apenas com View Pagers'' (P7). ``Eu tento usar o Fragment para lidar apenas com as visualizações, como a Activity, e eu o uso apenas quando preciso deles em um layout de Tablet ou para reutilizar em outra Activity. Caso contrário, eu não uso'' (P41). \\
% \textsc{Não Uso de Fragment}               		& ``[É má prática] não usar Fragments'' (P22). ``Utilizar fragments sempre que possível.'' (P19), ``Use um Fragment para cada tela. Uma Activity para cada aplicativo.'' (P45). ``[É má prática] usar todas as view (EditTexts, Spinners, etc...) dentro de Activities e não dentro de Fragments'' (P45). \\ 
% \textsc{Classes de UI Fazendo IO}          		& ``[É má prática em Activities e Fragments] fazer requests e consultas a banco de dados'' (P26). ``[É má prática em Adapters] fazer operações longas e requests de internet'' (P26). ``Elas [Activities] nunca devem fazer acesso a dados'' (P37). \\
% \textsc{Activity Inexistente}      				& ``Fazer Activities serem callbacks de processos assíncronos gerando memory leaks. Erros ao interpretar o ciclo de vida'' (P28). ``[É má prática] ter referência estática para Activities, resultando em vazamento de memória'' (P31). ``[É boa prática] não manter referências estáticas para Activities (ou classes anônimas criadas dentro delas)'' (P31). ``Deus mata um cachorro toda vez que alguém passa o contexto da Activity para um componente que tem um ciclo de vida independente dela. Vaza memória e deixa todos tristes.'' (P4). \\
% \textsc{Não Uso de Arquiteturas Conhecidas}		& \textbf{Más práticas:} ``Não usar um design pattern'' (P45). \textbf{Boas práticas:} ``Usar algum modelo de arquitetura para garantir apresentação desacoplada do framework (MVP, MVVM, Clean Architecture, etc)'' (P28). ``Sobre MVP. Eu acho que é o melhor padrão de projeto para usar com Android'' (P45). \\
% \textsc{Listener Escondido} 	          		& ``Nunca crie um listener dentro do XML. Isso esconde o listener de outros desenvolvedores e pode causar problemas até que ele seja encontrado'' (P34, P39 e P41). ``XML de layout deve lidar apenas com a view e não com ações'' (P41). \\
% \textsc{Adapter Complexo}.      				& \textbf{Má prática:} ``Reutilizar um mesmo adapter para várias situações diferentes, com \texttt{ifs} ou \texttt{switches}. Código de lógica importante ou cálculos em Adapters.'' (P23). \textbf{Boa prática:} ``Um Adapter deve adaptar um único tipo de item ou delegar a Adapters especializados'' (P2). \\
% \textsc{Fragment Aninhado}						& \\
% \textsc{Controle Manual da Pilha de Activities} & \textbf{Más práticas:} ``Sobreescrever o comportamento do botão voltar'' (P43). ``Lidar com a pilha do app manualmante'' (P41). \\
% \textsc{Estrutura de Pacotes}					& \\
% \textsc{Recurso Mágico}							& \textbf{Más práticas:} ``Strings diretamente no código'' (P23). ``Não extrair as strings e sobre não extrair os valores dos arquivos de layout'' (P31 e P35). \textbf{Boas práticas:} ``Sempre pegar valores de string ou dp de seus respectivos resources para facilitar'' (P7). ``Sempre adicionar as strings em resources para traduzir em diversos idiomas'' (P36). \\
% \textsc{Nome de Recurso Despadronizado}			& \textbf{Más práticas:} ``O nome das strings sem um contexto'' (P8). ``[Sobre Style Resources] Nada além de ter uma boa convenção de nomes'' (P37). ``[Sobre Layout Resource] Mantenha uma convenção de nomes da sua escolha'' (P37). \textbf{Boas práticas:} ``Iniciar o nome de uma string com o nome da tela onde vai ser usada'' (P27).  ``[Sobre Layout Resource] Ter uma boa convenção de nomeação'' (P43). ``[Sobre Style Resource] colocar um bom nome'' (P11). \\
% \textsc{Layout Profundamente Aninhado}			& \textbf{Más práticas:} ``Hierarquia de views longas'' (P26). ``Estruturas profundamente aninhadas'' (P4). ``Hierarquias desnecessárias'' (P39). ``Criar muitos ViewGroups dentro de ViewGroups'' (P45). \textbf{Boas Práticas:} ``Tento usar o mínimo de layout aninhado'' (P4). ``Utilizar o mínimo de camadas possível'' (P19). ``Não fazer uma hierarquia profunda de ViewGroups'' (P8). \\
% \textsc{Imagem Tradicional Dispensável}   		& \textbf{Más práticas:} ``Uso de formatos não otimizados, uso de drawables onde recursos padrão do Android seriam preferíveis'' (P23). ``Usar jpg ou png para formas simples é ruim, apenas as desenhe [através de Drawable Resources]'' (P37). \textbf{Boas práticas:} ``Quando possível, criar resources através de xml'' (P36). ``Utilizar o máximo de Vector Drawables que for possível'' (P28). ``Evite muitas imagens, use imagens vetoriais sempre que possível'' (P40).\\ 
% \textsc{Layout Longo ou Repetido}          		& \textbf{Má prática:} ``Copiar e colar layouts parecidos sem usar includes'' (P41). ``Colocar muitos recursos no mesmo arquivo de layout.'' (P23). \textbf{Boas práticas:} ``Sempre quando posso, estou utilizando includes para algum pedaço de layout semelhante'' (P32). ``Criar layouts que possam ser reutilizados em diversas partes'' (P36). ``Separe um grande layout usando include ou merge'' (P42) \\
% \textsc{Ausência de Diferentes Resoluções}  	& \textbf{Más práticas:} ``Ter apenas uma imagem para multiplas densidades'' (P31). ``Baixar uma imagem muito grande quando não é necessário. Há melhores formas de usar memória'' (P4). ``Não criar imagens para todas as resoluções'' (P44). \textbf{Boas prática:} ``Nada especial, apenas mantê-las em seus respectivos diretórios e ter variados tamanhos delas'' (P34). ``Criar as pastas para diversas resoluções e colocar as imagens corretas'' (P36). \\ 
% \textsc{Longo Recurso de Estilo}.       		& \textbf{Más práticas:} ``Deixar tudo no mesmo arquivo styles.xml'' (P28). ``Arquivos de estilos grandes'' (P8). \textbf{Boas prática:} ``Se possível, separar mais além do arquivo styles.xml padrão, já que é possível declarar múltiplos arquivos XML de estilo para a mesma configuração'' (P28). ``Divida-os. Temas e estilos é uma escolha racional'' (P40).\\
% \textsc{Recurso de String Bagunçado}       		& \textbf{Más práticas:} ``Usar o mesmo arquivo strings.xml para tudo'' (P28). ``Não orgaizar as strings quando o strings.xml começa a ficar grande'' (P42). \textbf{Boas prática:} ``Separar strings por tela em arquivos XML separados. Extremamente útil para identificar quais strings pertencentes a quais telas em projetos grandes'' (P28). ``Sempre busco separar em blocos, cada bloco representa uma Activity e nunca aproveito uma String pra outra tela'' (P32). \\
% \textsc{Atributos de Estilo Repetidos}     		& \textbf{Má prática:} ``Utilizar muitas propriedades em um único componente. Se tiver que usar muitas, prefiro colocar no arquivo de styles.'' (P32). \textbf{Boa prática:}  ``Sempre que eu noto que tenho mais de um recurso usando o mesmo estilo, eu tento movê-lo para o meu style resource.'' (P34).\\ 
% \textsc{Reúso Excessivo de String}.       		& \textbf{Más práticas:} ``Utilizar uma String pra mais de uma activity, pois se em algum momento, surja a necessidade de trocar em uma, vai afetar outra.'' (P32). ``Reutilizar a string em várias telas'' (P6) ``Reutilizar a string apenas porque o texto coincide, tenha cuidado com a semântica'' (P40). \textbf{Boas prática:} ``Sempre busco separar em blocos, cada bloco representa uma activity e nunca aproveito uma String pra outra tela.'' (P32). ``Não tenha medo de repetir strings [...]'' (P9). \\

\end{longtable}
}