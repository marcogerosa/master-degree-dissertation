\chapter{Tabela de ideias para mitigar os maus cheiros definidos}
\label{appendix:smells-purpose-of-solution}

\begin{table}
\centering
\tiny\setlength{\tabcolsep}{2.5pt}
\begin{tabular}{@{}p{3cm}p{8cm}p{6cm}@{}}
% \toprule
\textbf{MAU CHEIRO} & \textbf{FRASES QUE EMBASARAM O MAU CHEIRO} & \textbf{FRASES QUE PROPUSERAM SOLUÇÕES} \\
\hline
\textsc{Lógica Em Classes de UI}			& P16 sobre \textsc{Activities} diz \textit{``Fazer lógica de negócio''} (tradução livre)\footnote{Todo texto em inglês foi traduzido livremente ao longo do artigo.}, P19 diz \textit{``Colocar regra de negócio no adapter''} e P11 diz \textit{``Manter lógica de negócio em Fragments''}, P16 diz \textit{``Elas [\textsc{Activities}] representam uma única tela e apenas interagem com a UI, qualquer lógica deve ser delegada para outra classe''}, P23 diz \textit{``Apenas código relacionado à Interface de Usuário nas Activities''}, P40 diz \textit{``Adapters devem apenas se preocupar sobre como mostrar os dados, sem trabalhá-los''}. & Usar o padrão MVP (Model View Presenter). Manter Activitys, Fragments e Adapters apenas com códigos relacionados a UI. Usar herança criando classes como BaseActivity ou BaseFragment. Adapters devem se preocupar apenas em exibir informações, sem trabalhar nelas. \\
\textsc{Nome de Recurso Despadronizado}		&  &  \\
\textsc{Recurso Mágico}						&  &  \\
\textsc{Layout Profundamente Aninhado}		&  &  \\
\textsc{Classes de UI Acopladas}           	& P19 diz \textit{``Acoplar o fragment a activity ao invés de utilizar interfaces é uma prática ruim''}. P10, P31 e P45 indicam como má prática \textit{``acoplar o \textsc{Fragment} com a \textsc{Activity}''}. P37 diz que \textit{``Fragments nunca devem tentar falar uns com os outros diretamente''} e P45 diz \textit{``[é uma má prática] integragir com outro Fragment diretamente''}. P6 diz \textit{``Seja um componente de UI reutilizável. Então evite dependência de outros componentes da aplicação''}. P40 diz que é uma má prática \textit{``[o \textsc{Listener}] conter uma referência direta à Activities''}, P4 exprime a mesma ideia com uma frase um pouco diferente. P10 sobre \textit{Adapters} \textit{``alto acoplamento com a Activity''} e P45 exprime a mesma ideia ao dizer \textit{``Acessar Activities ou Fragments diretamente''}. & Utilizar interfaces para fazer a comunicação do Fragment com seu delegador (activity, etc). Use onAttach para checar, comunicar c/ activities \\
\textsc{Comportamento Suspeito}            	& P9 diz \textit{``Usar muitos anônimos pode ser complicado. Às vezes nomear coisas torna mais fácil para depuração''}, P4 diz \textit{``Mantenha-os [listeners] em classes separadas (esqueça sobre classes anônimas)''}, P32 diz \textit{``Prefiro declarar os listeners com "implements" e sobrescrever os métodos (onClick, por exemplo) do que fazer um set listener no próprio objeto''} e P8 diz \textit{``Muitas implementações de listener com classes anônimas''}. P42 diz \textit{``Declarar como classe interna da Activity ou Fragment ou outro componente que contém um ciclo de vida. Isso pode fazer com que os aplicativos causem vazamentos de memória.''}. P44 diz \textit{``Eu não gosto quando os desenvolvedores fazem a activity implementar o listener porque eles [os métodos] serão expostos e qualquer um pode chamá-lo de fora da classe. Eu prefiro instanciar ou então usar ButterKnife para injetar cliques.''}. P6 diz \textit{``Tome cuidade se a activity/fragment é um listener uma vez que eles são destruídos quando as configurações mudam. Isso causa vazamentos de memória.''}, P10 diz \textit{``Use carregamento automático de view como ButterKnife e injeção de dependência como Dagger2''}. P32 diz \textit{``Prefiro declarar os listeners com "implements" e sobrescrever os métodos (onClick, por exemplo) do que fazer um set listener no próprio objeto.''}. &  \\
\textsc{Mau Uso do Ciclo de Vida}          	& P42 diz ``Não conhecer o enorme e complexo ciclo de vida de fragment e não lidar com a restauração do estado''. P31 diz ``Não commitar fragmentos após o onPause e aprender o ciclo de vida se você quiser usá-los''. P28 diz ``Fazer Activities serem callbacks de processos assíncronos gerando memory leaks. Erros ao interpretar o ciclo de vida''. &  \\
\textsc{Layout Longo ou Repetido}          	&  &  \\
\textsc{Não Uso de Padrão View Holder}     	& Exemplos de frase que embasaram o mau cheiro são: P36 diz \textit{``Reutilizar a view utilizando ViewHolder.''}, de modo similar P39 diz \textit{``Usar o padrão ViewHolder''}. P45 sugere o uso do \textsc{RecyclerView}, um elemento Android para a construção de listas que já implementa o padrão \textit{ViewHolder} \cite{AluraViewHolder}. & Implementar o padrão \texttt{ViewHolder} ou usar \textsc{RecyclerView} para exibição de coleções. \\
\textsc{Não Uso de Arquiteturas Conhecidas}	& Exemplos de frases que indicaram más práticas são: P45 diz \textit{``Sobre não usar um design pattern''}. Exemplos de frases que indicaram boas prática são: P28 diz \textit{``Usar algum modelo de arquitetura para garantir apresentação desacoplada do framework (MVP, MVVM, Clean Architecture, etc)''}, P45 diz \textit{``Sobre MVP. Eu acho que é o melhor padrão de projeto para usar com Android''}.  &  Usar uma arquitetura que permita separar o código de interface do comportamento como: MVP, MVVM, MVC ou Clen Architecture.\\
\textsc{Tamanho Único de Imagem}           	&  &  \\
\textsc{Uso Excessivo de Fragment}         	& Alguns exemplos de frases que embasaram o mau cheiro são: P2 diz \textit{``Usar muitos Fragments é uma má prática''}. P7 diz \textit{``Evite-os. Use apenas com View Pagers''}. P41 diz \textit{``Eu tento usar o Fragment para lidar apenas com as visualizações, como a Activity, e eu o uso apenas quando preciso deles em um layout de Tablet ou para reutilizar em outra Activity. Caso contrário, eu não uso''}. &  \\
\textsc{Activity Inexistente}      			& Exemplos de frases que ambasaram o mau cheiro são: P28 diz \textit{``Fazer Activities serem callbacks de processos assíncronos gerando memory leaks. Erros ao interpretar o ciclo de vida''}, P31 diz \textit{``[...] ter referência estática para Activities, resultando em vazamento de memória''}. P31 diz \textit{``Não manter referências estáticas para Activities (ou classes anônimas criadas dentro delas)''}, P4 diz \textit{``Deus mata um cachorro toda vez que alguém passa o contexto da Activity para um componente que tem um ciclo de vida independente dela. Vaza memória e deixa todos tristes.''}. &  \\
\textsc{Não Uso de Imagens Vetoriais}      	&  &  \\
\textsc{Não Uso de Fragment}               	& P22 diz \textit{``Não usar Fragments''}. P19 diz \textit{``[...] Utilizar fragments sempre que possível.''}, P45 diz \textit{``Use um Fragment para cada tela. Uma Activity para cada aplicativo.''}. P45 também diz \textit{``[é má prática] usar todas as view (EditTexts, Spinners, etc...) dentro de Activities e não dentro de Fragments''} &  \\
\textsc{Classes de UI Fazendo IO}          	& P26 sobre \textsc{Activities} e \textsc{Fragments} diz \textit{``fazer requests e consultas a banco de dados''} e sobre \textsc{Adapter} diz \textit{``Fazer operações longas e requests de internet''}. P37 sobre \textsc{Activities} diz \textit{``Elas nunca devem fazer acesso a dados [...]''}. & Respostas indicam como boas práticas que esses elementos lidem apenas com a interface com o usuário e sugerem para isso, o padrão MVP \cite{WikipediaMVP, MartinFowlerGUIArchitectures}. \\
\textsc{Listener Escondido} 	          	& Exemplos de frases que embasaram o mau cheiro são: P34 diz \textit{``Nunca crie um listener dentro do XML. Isso esconde o listener de outros desenvolvedores e pode causar problemas até que ele seja encontrado''}, P39 e P41 expressam a mesma opinião, P41 ainda complementa dizendo que \textit{``XML de layout deve lidar apenas com a view e não com ações''}. & Usar a biblioteca \textit{ButterKnife} \cite{ButterKnife} para injeção de eventos.  \\
\textsc{Recurso de String Bagunçado}       	&  &  \\
\textsc{Atributos de Estilo Repetidos}     	&  &  \\
\textsc{Controle da Pilha de Telas}     	& P43 diz \textit{``Sobreescrever o comportamento do botão voltar''}. P41 diz \textit{``Lidar com a pilha do app manuelmante''}. &  \\
\hline
\end{tabular}
\caption{Possíveis Formas de Mitigar os Maus Cheiros.}
% \label{tab:Categories}
% \vspace{-.5cm} 
\end{table}