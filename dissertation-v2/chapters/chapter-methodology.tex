% -*- root:dissertation.tex -*-
O objetivo desta pesquisa...

Este trabalho trata-se de uma pesquisa exploratória de gênero empírico e de abordagem mista \cite{CreswellResearch:13}. Nosso objetivo é, por meio do conhecimento empírico de desenvolvedores Android, coletar e identificar más práticas comumente percebidas no desenvolvimento do \textit{front-end} Android e documentá-las na forma de maus cheiros. 

A percepção desempenha um importante papel na definição de maus cheiros de código relacionados a uma tecnologia específica \cite{arcoverde2011understanding, Palomba_Do_2014, yamashita2013developers}. Principalmente considerando a natureza subjetiva intrínseca a maus cheiros \cite{JavaQADetectingSmells:02, JavascriptSmells}.

Nossa abordagem mista se apresenta de forma que os maus cheiros são originados a partir de dados qualitativos coletados por meio de dois questionários online respondidos por 246 desenvolvedores Android. O dado quantitativo provém de dados coletados através um experimento pelo qual avaliamos a percepção de desenvolvedores Android sobre os maus cheiros definidos. Com esses dados foi possível extrair estatísticas relacionados a percepção dos maus cheiros.

Esta pesquisa foi realizada em três etapas. Cada qual objetivando responder a uma questão principal de pesquisa. Nesta seção apresentamos detalhes sobre cada etapa bem como a qual questão de pesquisa principal que se pretendia responder.

% São muitos os motivos válidos para se fazer pesquisa qualitativa, dentre eles, os que melhor nos serve de motivação é a natureza do problema, no caso maus cheiros de código e obter mais informações sobre uma área cujo ainda se sabe muito pouco, no caso, maus cheiros específicos ao Android \cite{Strauss2007}. Uma pesquisa qualitativa constitui-se na primeira etapa de uma investigação mais ampla na qual se busca o entendimento de um assunto específico por meio de descrições, comparações e interpretações dos dados \cite{Prates2015}.

% Algumas características básicas da pesquisa qualitativa, como \textit{a)} o foco na interpretação que os participantes possuem quanto à situação investigada e \textit{b)} o fato de enfatizar a subjetividade e a flexibilidade, orientando-se para o processo e não para o resultado, justificam seu uso nesta pesquisa \cite{Prates2015, King1994}.

% Além disso, na análise dos dados coletados, não há preocupação em comprovar hipóteses previamente estabelecidas. Algumas características básicas da pesquisa qualitativa, como \textit{a)} o fato de não apresentar foco na quantificação, apresentando-se centrada na interpretação que os participantes possuem quanto à situação investigada e \textit{b)} o fato de enfatizar a subjetividade e a flexibilidade no processo de condução da pesquisa, orientando-se para o processo e não para o resultado, justificam seu uso neste artigo \cite{Prates2015, King1994}.

% Maus cheiros desempenham um importante papel na busca por qualidade de código, visto que, após mapeados, podemos chegar a heurísticas para identificá-los e com essas heurísticas, implementar ferramentas que automatizem o processo de identificar códigos problemáticos.


% \section{Questões de Pesquisa}

% Maus cheiro são sintomas que podem indicar um problema mais profundo no código \cite{Refactoring:99}. Geralmente são derivados da experiência e opinião de desenvolvedores \cite{JavaQADetectingSmells:02} ou seja, são por natureza subjetivos \cite{JavascriptSmells}. Entretanto, há evidências na literatura que sugerem que maus cheiros são percebidos por desenvolvedores \cite{Palomba_Do_2014}. 

% \begin{center}
% \textbf{QP1. Existem maus cheiros que são específicos ao \textit{front-end} Android?}
% \end{center}

% Um mau cheiro de código, como vimos em detalhes na Seção X.X, são sintomas que podem indicar um problema mais profundo no código. Estes sintomas são extraído do conhecimento empírico de desenvolvedores experientes, de forma que, se vários desenvolvedores consideram determinado código como uma má prática, podemos entender esta má prática como um sintoma, logo, um mau cheiro. Iniciamos a pesquisa com algumas hipóteses de quais práticas poderiam ser consideradas más práticas, e portanto exalando um mau cheiro, no desenvolvimento do \textit{front-end} Android. Uma dessa situações hipotéticas foi, por exemplo, o uso de textos, cores e tamanhos diretamente no XML de layout, sem a criação de um novo recurso, respectivamente nos arquivos \texttt{strings.xml}, \texttt{colors.xml} ou \texttt{dimens.xml}. Para validarmos essas hipóteses iniciais, perguntamos a desenvolvedores Android o que eles consideravam como boas e más práticas no desenvolvimento do \textit{front-end} Android. Obtivemos 45 respostas dos quais pudemos extrair 25 possíveis maus cheiros dos quais confirmaram nossas hipóteses iniciais.


% \begin{center}
% \textbf{QP2. Quais maus cheiros são vistos com mais frequência e quais são considerados mais importantes?}
% \end{center}

% A fim de validar a existência e relevância dos maus cheiros derivados, submetemos um novo questionário online questionando os desenvolvedores Android o quanto eles percebiam os sintomas dos maus cheiros no seu dia a dia e o quanto eles consideravam importante mitigar aqueles sintomas. Obtivemos 196 respostas dos quais entendemos que 3 dos maus cheiros derivados não eram relevantes aos desenvolvedores, finalizando então com 21 maus cheiros de código Android.

% \begin{center}
% \textbf{QP3. Códigos afetados pelos maus cheiros são percebidos como códigos problemáticos?}
% \end{center}


% A fim de validar a percepção dos maus cheiros pelos desenvolvedores em códigos Android, realizamos um experimento com 75 desenvolvedores onde apresentamos randomicamente códigos Android afetados pelos maus cheiros e códigos limpos e perguntávamos a cada código, se o participante percebia aquele código como problemático, se sim, qual a gravidade do problema e qual o problema percebido. Ao final deste processo descartamos mais 3 maus cheiros pois não se mostraram percebidos por desenvolvedores e concluímos com 19. Através do resultado desse experimento conseguimos extrair dados para realizar uma análise estatística da percepção dos desenvolvedores por meio das métricas p-value e cliff d [descrever aqui para que servem e pq são boas neste caso].

\section{Método de Pesquisa}

Esta pesquisa foi divida em 3 etapas conforme apresentado na Figura \ref{fig:ResearchPhases}. 


A primeira etapa objetiva responder a \textbf{QP1: Existem maus cheiros que são específicos ao front-end Android?} Para obtermos os dados iniciais, buscamos entender o que desenvolvedores Android consideram boas e más práticas ao desenvolver aplicativos Android. Estes dados foram obtidos através de um questionário online respondido por 45 desenvolvedores. A partir desses dados foi realizado um processo de codificação pelo qual derivamos 21 possíveis maus cheiros de código Android. Apresentamos na Seção \ref{etapa-1} os detalhes desta etapa. 

%  Colocar isso na seção específica ou aqui mesmo
%  pois como mencionado na Seção X.X [ref teórico], maus cheiros de código bem como outras boas práticas de software são derivações de conhecimento empírico

\begin{figure}[!htb]
  \centering
  \includegraphics[width=.7\textwidth]{etapas-pesquisa2.png}
  \caption{Etapas da pesquisa.}
  \label{fig:ResearchPhases}
\end{figure}

Na segunda etapa, objetivamos responder a \textbf{QP2. Com qual frequência os maus cheiros são percebidos e o quão importante são considerados pelos desenvolvedores?}. Fizemos isso a partir de outro questionário online respondido por 201 desenvolvedores Android. Nessa etapa, 5 dos maus cheiros inicialmente derivados foram removidos, visto que não eram considerados importantes para os desenvolvedores, restando 16. Apresentamos os detalhes desta etapa na Seção \ref{etapa-2}. 

Na terceira e última etapa, objetivamos responder a \textbf{QP3. Desenvolvedores Android percebem os códigos afetados pelos maus cheiros como problemáticos?}. Para isso fizemos um experimento com 75 desenvolvedores Android do qual pudemos colher dados estatísticos sobre a percepção sobre os maus cheiros. Nesta etapa mais 3 maus cheiros foram descartados e concluímos com 13 maus cheiros do \textit{front-end} Android percebidos e considerados relevantes a desenvolvedores Android. Os detalhes desta etapa são apresentados na Seção \ref{etapa-3}.

% \subsection{Participantes}
% \todo{Colocar um resumo aqui sobre todos os participantes.}

% \todo{Abordar sobre a composição dos participantes, em termos de nacionalidade. Podemos adicionar tb um trecho em ameaças a validade, visto que em sua maioria as respostas foram de brasileiros}

\subsection{Etapa 1 - Boas e más práticas no \textit{front-end} Android}
\label{etapa-1}

% \todo{Algumas más práticas que identificamos se contradizem, como por exemplo a opinião sobre o uso de fragments, alguns recomendam fortemente o uso e outros fortemente o não uso, como saber então qual a má prática? Como distinguir de opinião ou falta de conhecimento, etc?}

% \todo{Pensar sobre este comentário: ``A recorrência da má prática foi determinada pelo número de respostas em que ela é citada. No entanto, um mesmo participante pode ter citado aquela mesma má prática nas duas perguntas a respeito de um mesmo elemento. Ocorreu essa situação? Se ocorreu, vocês contaram as duas respostas para calcular a recorrência? Se sim, acham justo, uma vez que descrevem a mesma situação, percebida pela mesma pessoa?'' pois não tenho certeza se ocorreu mas acredito que sim, logo, preciso entender se isso pode ser um problema ao estudo.}

Iniciamos nossa pesquisa com algumas hipóteses de quais práticas poderiam ser consideradas más práticas, e portanto exalando um mau cheiro no desenvolvimento do \textit{front-end} Android. Uma dessas situações hipotéticas foi, por exemplo, o uso de textos, cores e tamanhos diretamente no XML de layout, sem a criação de um novo recurso, respectivamente nos arquivos \texttt{strings.xml}, \texttt{colors.xml} ou \texttt{dimens.xml}. 

Para validarmos essa e outras hipóteses e responder a \textbf{QP1. Quais são possíveis maus cheiros do \textit{front-end} Android?}, perguntamos através de um questionário online respondido por 45 desenvolvedores o que eles consideravam como boas e más práticas no desenvolvimento do \textit{front-end} Android. Com o resultado extraímos 46 categorias que resultaram em 21 maus cheiros, dentre os quais, estavam maus cheiros que confirmaram nossas hipóteses iniciais.

A seguir apresentamos detalhes sobre a concepção do questionário (Seção \ref{etapa-1-questionario}), sobre os participantes (Seção \ref{etapa-1-participantes}) e sobre o processo de análise dos dados (Seção \ref{etapa-1-analise}).

% , porém havia um texto informativo avisando que tanto respostas em inglês ou português eram aceitas. 


\subsubsection{Questionário}
\label{etapa-1-questionario}

% O questionário (\textit{S1}) foi composto por 25 questões divididas em três seções onde a primeira seção continha 6 perguntas demográficas, a segunda 16 perguntas sobre boas e más práticas relacionadas ao \textit{front-end} Android e a terceira seção continha 3 perguntas, 2 para obter últimos pensamentos sobre boas e más práticas e 1 solicitando email caso o participante tivesse interesse em etapas futuras da pesquisa. O questionário foi escrito em inglês e divulgado em diversas redes sociais e grupos de discussão relacionados a Android.

% A primeira seção é composta por 6 questões demográficas obrigatórias de múltipla escolha. Abordavam sobre idade (18 ou menos, 19 a 24, 25 a 34 e assim por diante até 55 ou mais), estado de residência (é dada uma lista com estados do Brasil, Estados Unidos e Europa), anos de experiência com desenvolvimento de software, (1 anos ou menos, 2 anos, 3 anos, e assim por diante até 10 ou mais), anos de experiência com desenvolvimento Android (mesma escala de anos da questão anterior), uma questão sobre linguagens que o participante se considerava proeficiente (Java, Python, Ruby, Android, dentre outras) e sobre o último grau de escolaridade (estudante de bacharelado, bacharel, mestrado e doutorado). As questões sobre idade, região, linguagens e grau de escolaridade também continham a opção ``outros'' para o caso de nenhuma das opções atenderem, ao selecionar ``outros'' era possível escrever uma resposta.


% Antes da divulgação, realizamos um piloto com 3 desenvolvedores Android. Como \textit{feedback} do teste piloto, percebemos que nem sempre os desenvolvedores tinham alguma boa ou má prática referente a determinado elemento, desta forma, após o teste piloto configuramos as perguntas da segunda seção como opcionais. As respostas dos participantes piloto foram desconsideradas para efeitos de viés. O questionário completo pode ser encontrado no apêndice XX.

O questionário (\emph{S1}) foi composto por 25 questões divididas em três seções, o questionário completo pode ser visto no Apêndice \ref{ap:survey-1}. A primeira seção teve o objetivo de traçar o perfil demográfico do participante (idade, estado de residência, experiência em desenvolvimento de software, experiência com desenvolvimento Android e escolaridade) e foi composta de 6 questões. A segunda seção teve como objetivo entender o que os desenvolvedores consideravam boas e más práticas no desenvolvimento do \textit{front-end} Android. Foi composta por 16 questões opcionais e abertas, 8 sobre boas práticas em cada um dos 8 elementos do \textit{front-end} Android e 8 sobre más práticas. Por exemplo, para o elemento \textsc{Activity} foram feitas as seguintes perguntas: 

\begin{itemize}
  \small
  \item[] \textbf{Você tem alguma boa prática para lidar com \texttt{Activities}?} (Resposta aberta)
  \item[] \textbf{Você considera alguma coisa uma má prática ao lidar com \texttt{Activities}?} (Resposta aberta)
\end{itemize}

% \todo{por que boas E más práticas?}

A terceira seção foi composta por 3 perguntas opcionais e abertas, 2 para captar qualquer última ideia sobre boas e más práticas não captadas nas questões anteriores e 1 solicitando o email do participante caso o mesmo tivesse interesse em participar de etapas futuras da pesquisa. 

Antes da divulgação realizarmos um teste piloto com 3 desenvolvedores Android. Na primeira configuração do questionário, todas as perguntas, de todas as seções com exceção do email, eram obrigatórias. Com o resultado do teste piloto, percebemos que nem sempre o desenvolvedor tem alguma boa ou má prática para comentar sobre todos os oito elementos questionados. Desta forma, removemos a obrigatoriedade das perguntas da segunda e terceira seção tornando-as opcionais e permitindo o participante responder apenas as boas e más práticas dos elementos que lhe faziam sentido. As respostas dos participantes piloto foram desconsideradas por efeitos de viés. 

% \todo{O que responderam nas questões sobre OUTRAS boas e más práticas?}

O questionário foi divulgado em redes sociais como Facebook, Twitter e Linkedin, em grupos de discussão sobre Android como Android Dev Brasil\footnote{https://groups.google.com/forum/\#!forum/androidbrasil-dev}, Android Brasil Projetos\footnote{https://groups.google.com/forum/\#!forum/android-brasil-projetos} e o grupo do Slack Android Dev Br\footnote{http://slack.androiddevbr.org}, maior grupo de desenvolvedores Android do Brasil com 2622 participantes até o momento desta escrita\footnote{Dado verificado em 25/11/2017.}. O questionário esteve aberto por aproximadamente 3 meses e meio, de 9 de Outubro de 2016 até 18 de Janeiro de 2017. Ao final, o questionário foi respondido por 45 desenvolvedores. 

\begin{figure*}[!t]
\centering
\includegraphics[width=.6\linewidth]{phase1-survey-answers.png}
\caption{Percentual de respostas sobre boas e más práticas nos elementos do \textit{front-end} Android.}
\label{fig:ElementsVSAnswers}
\end{figure*}

Recebemos um total de 45 respostas. 80\% dos participantes responderam pelo menos 3 perguntas, apenas 20\% responderam uma (2 participantes) ou nenhuma (7 participantes) pergunta. A questão do email era opcional, mas foi respondida por 53\% dos participantes, o que pode indicar um interesse legítimo da comunidade de desenvolvedores Android pelo tema, reforçando a relevância do estudo.

Conforme apresentado na Figura \ref{fig:ElementsVSAnswers}, todos os elementos do \textit{front-end} Android receberam respostas sobre boas e más práticas. O elemento que recebeu menos respostas foi o recurso \textsc{Style}, com 51\% sobre boas práticas, e o que menos recebeu respostas foi o recurso \textsc{Drawable}, com 47\% sobre más práticas. Esse resultado pode ser entendido como um indício de que desenvolvedores Android de fato possuem um arsenal pessoal de práticas de desenvolvimento Android que consideram boas e más. 

Podemos observar que classes Java, no geral, receberam mais respostas do que recursos da aplicação. Dentre os elementos Java, os mais respondidos foram \textsc{Activity} e \textsc{Fragment}. Dentre os recursos da aplicação, os mais respondidos foram \textsc{Layout} e \textsc{String}. Notamos também que mais boas práticas foram indicadas do que más práticas em todos os elementos.

% Todas as 18 questões sobre boas e más práticas (16 na segunda seção e 2 da terceira) são apresentadas na Tabela \ref{tab:RespostasXParticipantes} com o total e respectivo \% recebido de respostas. Podemos observar que classes Java no geral receberam mais respostas do que recursos da aplicação. Os elementos que menos receberam respostas foram todos relacionados a recursos da aplicação: \textsc{Drawable} 21\%, seguido de \textsc{Styles} com 22\% e \textsc{Strings}, \textsc{Styles}, \textsc{Layouts} com 23\% e \textsc{Listeners} 23\%.

% \begin{table*}[t]
% \footnotesize
% \begin{tabular}{@{}p{14cm}cc@{}}
% \toprule
% \multirow{2}{*}{\textbf{Questões}}  & \multicolumn{2}{c}{\textbf{Respostas}}  \\ \cmidrule{2-3}
%                                     & \textbf{Total} & \textbf{\%} \\
% \toprule
% Você tem alguma boa prática para lidar com \texttt{Activities}?                              &36 &80\%         \\
% Você considera alguma coisa uma má prática ao lidar com \texttt{Activities}?                 &35 &78\%         \\
% Você tem alguma boa prática para lidar com \texttt{Fragments}?                             &33 &73\%         \\
% Você considera alguma coisa uma má prática ao lidar com \texttt{Fragments}?                    &31 &69\%         \\
% Você tem alguma boa prática para lidar com \texttt{Adapters}?                                &30 &67\%         \\
% Você considera alguma coisa uma má prática ao lidar com \texttt{Adapters}?                   &27 &60\%         \\
% Você tem alguma boa prática para lidar com \texttt{Listeners}?                             &24 &53\%         \\
% Você considera alguma coisa uma má prática ao lidar com \texttt{Listeners}?                    &23 &51\%         \\
% Você tem alguma boa prática para lidar com \texttt{\texttt{Layout Resources}}?                            &28 &62\%         \\
% Você considera alguma coisa uma má prática ao lidar com \texttt{Layout Resources}?               &23 &51\%         \\
% Você tem alguma boa prática para lidar com \texttt{Styles Resources}?                            &23 &51\%         \\
% Você considera alguma coisa uma má prática ao lidar com \texttt{Styles Resources}?               &22 &49\%         \\
% Você tem alguma boa prática para lidar com \texttt{String Resources}?                            &28 &62\%         \\
% Você considera alguma coisa uma má prática ao lidar com \texttt{String Resources}?               &23 &51\%         \\
% Você tem alguma boa prática para lidar com \texttt{Drawable Resources}?                          &24 &53\%         \\
% Você considera alguma coisa uma má prática ao lidar com \texttt{Drawable Resources}?             &21 &47\%         \\
% Existem outras *BOAS* práticas sobre a Camada de Apresentação Android que nós não perguntamos ou que você não disse ainda?  &22 &49\% \\
% Existem outras *MáS* práticas sobre a Camada de Apresentação Android que nós não perguntamos ou que você não disse ainda? &20 &44\% \\
% % \hline
% % \multicolumn{6}{@{}l}{\textit{* Categorias desconsideradas por se tratarem de boas práticas pré-existentes.}} \\
% \bottomrule
% \end{tabular}
% \caption{Total de respostas obtidas por cada questão sobre boas e más práticas no \textit{front-end} Android.}
% \label{tab:RespostasXParticipantes}
% \end{table*}


\subsubsection{Participantes}
\label{etapa-1-participantes}

% Recebemos um total de 45 respostas. 80\% dos participantes responderam pelo menos 3 perguntas sobre boas e más práticas no \textit{front-end} Android, sendo que 7 responderam de 3 a 6, 6 responderam de 8 a 10 e 23 responderam 13 ou mais, sendo que desses, 14 responderam todas. Apenas 20\% responderam uma (2 participantes) ou nenhuma (7 participantes) questão. A pergunta solicitando o email foi respondida por 53\% dos participantes, o que pode indicar um interesse legítimo da comunidade de desenvolvedores Android pelo tema, reforçando a relevância do estudo. A pergunta mais respondida foi a Q1 e a menos respondida foi a Q18, é possível ver detalhes desta análise na Tabela \ref{tab:RespostasXParticipantes}.

Conforme apresentado na Figura \ref{fig:phase1-participants-experience}, 87\% dos participantes indicaram ter 2 anos ou mais de experiência com desenvolvimento Android. Vale lembrar que a plataforma Android completa 10 anos em 2018, ou seja, 5 anos de experiência nessa plataforma representa 50\% do tempo de existência dela desde seu anúncio em 2008. 

Conseguimos atingir 3 continentes porém, a maior representatividade dos dados é originada do Brasil com 80\% dos participantes. Desse total, os estados com maior representatividade foram, na ordem: São Paulo com 44\%, Rio de Janeiro e Goiás cada um com 7\% e Rio Grande do Sul e Santa Catarina, cada um com 4\%. 16\% dos participantes são originados de países Europeus, sendo Irlanda com 8\% e Alemanha, Polônia, Suíça e Reino Unido com 2\% (1 participante) cada. Nos Estados Unidos tivemos apenas 2\%.

\begin{figure*}[!t]
\centering
\begin{subfigure}{.49\textwidth}
  \centering
  \includegraphics[width=.85\textwidth]{phase1-participants-experience.png}
  \caption{Experiência}
  \label{fig:phase1-participants-experience}
\end{subfigure}
\begin{subfigure}{.49\textwidth}
  \centering
  \includegraphics[width=.94\textwidth]{phase1-participants-regions.png}
  \caption{Distribuição geográfica}
  \label{fig:phase1-participants-regions}
\end{subfigure}% 
\caption{Experiência com desenvolvimento de software, desenvolvimento Android e distribuição geográfica dos participantes de \emph{Q1}.}
\label{fig:all-resources}
\vspace{-.5cm} 
\end{figure*}

Dessa forma, podemos concluir que tivemos certa abrangência geográfica, no entanto, acreditamos que o mais apropriado seja dizer que os maus cheiros derivados das boas e más práticas representam a opinião de desenvolvedores brasileiros.

% \begin{table}[h]
% \centering
% \renewcommand*{\arraystretch}{1}
% \footnotesize 
% \begin{tabular}{@{}lcr@{}}
% \toprule
% \textbf{Anos de Experiência} & \textbf{Participantes} & \multicolumn{1}{c}{\textbf{\%}} \\
% \toprule
% 1 ano ou menos 	&	 6 		& 	13 \%	 \\
% 2 anos 			& 	 7 		& 	  16 \%	 \\
% 3 anos 			& 	 12		& 	  27 \%	 \\
% 4 anos 			& 	 6 		& 	  13 \%	 \\
% 5 anos 			& 	 3 		& 	   7 \%	 \\
% 6 anos 			& 	 7 		& 	  16 \%	 \\
% 7 anos 			& 	 2 		& 	   4 \%	 \\
% 8 anos 			& 	 2 		& 	   4 \%	 \\
% \bottomrule
% \end{tabular}
% \caption{Experiência dos participantes com desenvolvimento Android.}
% \label{tab:DadosDemograficos}
% \end{table}

\subsubsection{Análise dos Dados}
\label{etapa-1-analise}

Para análise dos dados seguimos a abordagem de \textit{Ground Theory} (GT), um método de pesquisa exploratória originada nas ciências sociais \cite{Strauss2007, GlaserStrauss1999}, mas cada vez mais popular em pesquisas de engenharia de software \cite{Adolph2011}. A GT é uma abordagem indutiva, pelo qual dados provindos, por exemplo de, entrevistas ou questionários, são analisadas para derivar uma teoria. O objetivo é descobrir novas perspectivas mais do que confirmar alguma já existente. O processo de análise partiu da listagem das 45 respostas do questionário e se deu em 4 passos: \textit{verticalização}, \textit{limpeza dos dados}, \textit{codificação} e \textit{divisão}.

% Realizamos um processo de codificação aberta sobre os dados, resultando num conjunto com 23 más práticas Android. Essas más práticas foram agrupadas de acordo com sua recorrência nas respostas, ou seja, a quantidade de respostas em que cada má prática é percebida. 

% O processo de análise partiu da listagem das 45 respostas do questionário e se deu em 4 passos: \textit{verticalização}, \textit{limpeza dos dados}, \textit{codificação} e \textit{divisão}.

O processo que denominamos de \textit{verticalização} consistiu em considerar cada resposta de boa ou má prática como um registro individual a ser analisado. Ou seja, cada participante respondeu 18 perguntas sobre boas e más práticas no \textit{front-end} Android (2 perguntas para cada elemento e mais duas perguntas genéricas). Com o processo de \textit{verticalização}, cada uma dessas respostas se tornou um registro, ou seja, cada participante resultava em 18 respostas a serem analisadas, totalizando 810 respostas (18 perguntas multiplicado por 45 participantes) sobre boas e más práticas.

O passo seguinte foi realizar a \textit{limpeza dos dados}. Esse passo consistiu em remover respostas obviamente não úteis como respostas em branco, respostas contendo frases como \textit{"Não"}, \textit{"Não que eu saiba"}, \textit{"Eu não me lembro"} e similares, as consideradas vagas como \textit{"Eu não tenho certeza se são boas praticas mas uso o que vejo por ai"}, as consideradas genéricas como \textit{"Como todo código java..."} e as que não eram relacionadas a boas ou más práticas de código. Das 810 boas e más práticas, 352 foram consideradas e 458 desconsideradas. Das 352, 45\% foram apontadas como más práticas e 55\% como boas práticas. 

Em seguida, realizamos a \textit{codificação} sobre as boas e más práticas \cite{Strauss2007,Saldana2013}. Codificação é o processo pelo qual são extraídos categorias de um conjunto de afirmações através da abstração de ideias centrais e relações entre as afirmações \cite{Strauss2007}. Durante esse processo, cada resposta recebeu uma ou mais categorias. Neste passo desconsideramos mais algumas respostas, isso ocorreu pois não eram respostas ``obviamente'' descartáveis como as do passo anterior e foi necessária a análise para chegarmos a esta conclusão de desconsiderá-las. Para cada resposta desconsiderada nesse passo registramos o motivo, este pode ser conferido nos arquivos em nosso apêndice online.

% Também durante esse processo, houveram 30 respostas que não eram triviais de identificar uma categoria ou mesmo de dizer se essas respostas deveriam ser consideradas. Essas respostas foram marcadas como \textit{"talvez"} e reavaliadas ao final. 

Por último realizamos o passo de \textit{divisão}. Esse passo consistiu em dividir as respostas que receberam mais de uma categoria em duas ou mais respostas, de acordo com o número de categorias identificadas, de modo a resultar em uma categoria por resposta. Por exemplo, a resposta \textit{"Não fazer Activities serem callbacks de execuções assíncronas. Herdar sempre das classes fornecidas pelas bibliotecas de suporte, nunca diretamente da plataforma"} indica na primeira oração uma categoria e na segunda oração, outra categoria. Ao dividi-la, mantivemos apenas o trecho da resposta relativo à categoria, como se fossem duas respostas distintas e válidas. Em algumas divisões realizadas, a resposta completa era necessária para entender ambas as categorizações, nesses casos, mantivemos a resposta original, mesmo que duplicada, e categorizamos cada uma de modo diferente. 

Ao final da análise constavam 359 respostas sobre boas e más práticas individualmente categorizadas em 46 categorias. Para derivação dos maus cheiros foram consideradas 23 categorias que apresentaram frequência de recorrência maior ou igual a cinco. Segundo Nielsen, cinco repetições é o suficiente para se obter dados necessários para definir um problema, as repetições seguintes tendem a não agregar novas informações relevantes, se não as já observadas \cite{NielsenMagicNumber:00}. Dessas categorias, duas foram desconsideradas por se tratarem de: um mau cheiro tradicional (\textit{Large Class}) e um aspecto da orientação a objetos (Herança). 

% A escolha do número três como número mínimo de repetições para se derivar um mau cheiro é porque evita a invariabilidade do número 1, a coincidência do número 2 e já representa alguma variação \cite{campos2001estatistica}. 

O interessante é que por acaso nos deparamos com as mesmas conclusões que algumas pesquisas anteriores, de que aplicativos Android são fortemente afetados pelo mau cheiro \textit{Large Class} \cite{MobileSmells:13} e que é pouco ou quase nada usado herança para estruturar o \textit{design} do código \cite{Mantyla2013}. Como nosso foco não estava em avaliar a presença de maus cheiro tradicionais ou práticas de orientações a objetos em aplicativos Android, desconsideramos esses resultados. A Tabela \ref{tab:CategoriesVSFrequency} apresenta as 21 categorias consideradas para derivação dos maus cheiros.

\begin{table}[h]
\centering
\renewcommand*{\arraystretch}{1}
\footnotesize 
\begin{tabular}{@{}p{8.5cm}cc@{}}
\toprule
\textbf{Categoria} & \textbf{Ocorrências} & \textbf{Tipo} \\ 
\toprule
\textsc{Classes de UI Inteligentes}       &  60    & Java \\
\textsc{Nome de Recurso Despadronizado}   & 23     & Recurso \\
\textsc{Recursos Mágicos}                 &  23    & Recurso \\
\textsc{Layout Profundamente Aninhado}    &  18    & Recurso \\
\textsc{Classes de UI Acopladas}          &  18    & Java \\
\textsc{Imagens Dispensável}              &  18    & Recurso \\
\textsc{Comportamento Suspeito}           &  17    & Java \\
\textsc{Layout Longo ou Repetido}         &  14    & Recurso \\
\textsc{Adapter Consumista}               &  13    & Java \\
\textsc{Imagem Faltante}                  &  12    & Recurso \\
\textsc{Uso Excessivo de Fragments}       &  9     & Java \\
\textsc{Classes de UI Fazendo IO}         &  9     & Java \\
\textsc{Não Uso de Fragments}             &  8     & Java \\
\textsc{Longo Recurso de Estilo}          &  8     & Recurso \\
\textsc{Recurso de String Bagunçado}      &  8     & Recurso \\
\textsc{Atributos de Estilo Repetidos}    &  7     & Recurso \\
\textsc{Referência Morta}                 &  10    & Java \\
\textsc{Arquitetura Não Identificada}     &  6     & Java \\
\textsc{Reuso inadequado de String}       &  6     & Recurso \\
\textsc{Adapter Complexo}                 &  5     & Java \\
\textsc{Listener Escondido}               &  5     & Java \\
\bottomrule
\end{tabular}
\caption{Total de ocorrências e tipo de elemento Android afetado por categoria.}
\label{tab:CategoriesVSFrequency}
\end{table}


% A Tabela \ref{tab:CategoriesVSFrequency} apresenta as 21 categorias consideradas para derivação dos maus cheiros. A partir dessas categorias e respostas, foi extraída a primeira definição dos maus cheiros, sendo que os sintomas foram embasados nas respostas dadas. 

Cada categoria considerada deu origem a um mau cheiro de código no \textit{front-end} Android sendo 11 relacionadas a elementos Java e 10 relacionadas a recursos da aplicação.


\subsection{Etapa 2 - Frequência e importância dos maus cheiros}
\label{etapa-2}

Para responder a \textbf{QP2}, buscamos entender a percepção dos desenvolvedores com relação a frequência e importância dos maus cheiros derivados em seu dia a dia. Coletamos esta percepção por meio de um questionário online com três seções sendo a primeira para coleta de dados demográficos da mesma forma da etapa 1, a segunda para coleta da percepção de frequência dos maus cheiros no dia a dia de desenvolvimento e a terceira para coleta da percepção de importância. Coletamos ao todo 201 respostas de desenvolvedores Android de diversos países. Com o resultado conseguimos validar que os 16 maus cheiros derivados são percebidos no dia a dia de desenvolvimento e são considerados importantes.

A seguir apresentamos detalhes sobre a concepção do questionário (Seção \ref{etapa-2-questionario}), sobre os participantes (Seção \ref{etapa-2-participantes}) e sobre o processo de análise dos dados (Seção \ref{etapa-2-analise}).


\subsubsection{Questionário}
\label{etapa-2-questionario}

Foram criadas duas versões do questionário, inglês e português, de forma que um apontava para o outro, possibilitando o respondente escolher o idioma mais apropriado a ele. O questionário (\textit{Q2}) continha 3 seções, a primeira seção, como em \textit{Q1}, tinha o objetivo de traçar o perfil demográfico do participante (idade, estado de residência, experiência em desenvolvimento de software, experiência com desenvolvimento Android e escolaridade) e foi composta de 6 questões. 

A segunda seção objetivou capturar a percepção dos desenvolvedores com relação a frequência em que eles percebiam os maus cheiros no seu dia a dia. Fizemos isso apresentando uma lista de frases, onde cada frase descrevia o sintoma de um dos maus cheiros, e pedimos para o respondente \textbf{indicar com qual frequência ele percebia cada uma das situações listadas no seu dia a dia}. Para cada frase o respondente podia escolher uma dentre os cinco opções da escala \textit{likert} de frequência: muito frequente, frequente, as vezes, raramente e nunca. 

As frases foram baseadas nas respostas em \emph{Q1}, por exemplo, para o mau cheiro \textbf{\textsc{Classes de UI Acopladas}} algumas das respostas sobre más práticas foram \textit{``Acoplar o \texttt{Fragment} a \texttt{Activity} ao invés de utilizar interfaces é uma prática ruim''} (P19) e \textit{``Acoplar o \texttt{Fragment} com a \texttt{Activity}''} (P10, P31 e P45), e boa prática foi \textit{``Seja um componente de UI reutilizável. Então evite dependência de outros componentes da aplicação''} (P6). Com base nas respostas, extraímos a seguinte para representar o sintoma do mau cheiro:

\begin{itemize}
  \item \emph{\small\textbf{\texttt{Fragments}, \texttt{Adapters} ou \texttt{Listeners} com referência direta para quem os usa, como \texttt{Activities} ou outros \texttt{Fragments.}}} 
\end{itemize}

Para contemplar os 21 maus cheiros foram apresentadas 27 frases, essa diferença do número total de maus cheiros vs. o número de frases se dá pois, para os maus cheiros \textsc{Comportamento Suspeito}, \textsc{Entenda o Ciclo de Vida}, \textsc{Layout Longo ou Repetido}, \textsc{Longo Recurso de Estilo} e \textsc{Atributos de Estilo Repetidos} identificamos nas respostas em \emph{Q1}, mais de um sintoma que os representavam. Com o objetivo de entender qual(is) sintoma(s) era percebido no dia a dia pelo desenvolvedor, optamos por apresentar mais de uma frase para eles, sendo que cada frase abordou um dos sintomas. Por exemplo, para o mau cheiro \textbf{\textsc{Comportamento Suspeito}} apresentamos três frases, onde cada uma representou uma forma diferente, considerada má prática pelos respondentes de \emph{Q1}, sobre como implementar a resposta a eventos do usuário:

\begin{itemize}
  \small
  \item \emph{\textbf{\texttt{Activities}, \texttt{Fragments} ou \texttt{Adapters} com \underline{classes anônimas} para responder a eventos do usuário, como clique, duplo clique e outros.}}

  \item \emph{\textbf{\texttt{Activitie}s, \texttt{Fragments} ou \texttt{Adapters} implementando algum \texttt{listener}, \underline{através de} \underline{polimorfismo} (\texttt{implements}), para responder a eventos do usuário como clique, duplo clique e outros.}}

  \item \emph{\textbf{\texttt{Activities}, \texttt{Fragments} ou \texttt{Adapters} com \underline{classes internas} implementando algum \texttt{listener} para responder a eventos do usuário como clique, duplo clique e outros.}} 
\end{itemize}

A terceira seção objetivou capturar a percepção dos desenvolvedores com relação a importância em mitigar os sintomas dos maus cheiros, para isso foi solicitado que \textbf{indicasse o quão importante ele considerava as frases apresentadas}. Para contemplar os 21 maus cheiros apresentamos 25 frases que basicamente negavam a frase relacionada a percepção de frequência do mau cheiro. A divergência do total de maus cheiros vs. o total de frases apresentadas se dá pelo mesmo motivo encontrado na seção anterior do questionário, sobre percepção de frequência. Como exemplo, novamente sobre o mau cheiro \textsc{Classes de UI Acopladas}, apresentamos a seguinte frase:

\begin{itemize}
  \item \textbf{\small\emph{\texttt{Fragments}, \texttt{Adapters} e \texttt{Listeners} não ter referência direta à quem os utiliza.}}
\end{itemize}

Para cada frase o respondente podia escolher uma dentre as cinco opções da escala \textit{likert} de importância: muito importante, importante, razoavelmente importante, pouco importante, não é importante. 

Antes da divulgação do questionário realizamos a validação de cada uma das frases, por meio de entrevista individual, com dois desenvolvedores Android experientes, \emph{Dev-A} e \emph{Dev-B}. \emph{Dev-A} possui 10 anos de experiência com desenvolvimento de software e 5 anos de experiência com desenvolvimento Android, se considera proficiente nas tecnologias Java, Objective C, Swift e Android e possui grau escolar de bacharel. \emph{Dev-B} possui 7 anos de experiência com desenvolvimento de software e 6 anos de experiência com desenvolvimento Android, se considera proficiente nas tecnologias Java, Objective C e Android e possui grau escolar de bacharel \todo{confirmar com o Cauê}. Ambos os desenvolvedores trabalham atualmente em \textit{startups} brasileiras com desenvolvimento mobile. 

A entrevista seguiu de forma que o desenvolvedor validador procedia respondendo o questionário e quando tinha dúvida sobre uma frase, o mesmo questionava e então ela era discutida e quando necessário, reestruturada ou reescrita, de acordo com o \textit{feedback} do validador. Após a discussão ele respondia, considerando a conclusão das discussões, e seguia para a próxima. Esta dinâmica segue até passar pro todas as frases e ao final o validador era incentivado a dar qualquer outro \textit{feedback} que considerasse relevante. Alguns importantes ajustes foram realizados após o primeiro validador. 

O principal ajuste foi relacionado a escala \textit{likert} utilizada, sendo que, na primeira versão do questionário, respondido por \emph{Dev-A}, foi usada tanto para validar importância quanto para validar frequência a mesma escala \textit{likert} de nível de concordância (concordo totalmente, concordo, não concordo nem discordo, discordo, discordo totalmente), deixando para a frase a responsabilidade de indicar do que se tratava, frequência ou importância. Durante a validação percebemos que as frases ficavam muito maiores de ler e difíceis de serem interpretadas então trocamos para escalas de frequência e importância e ajustamos as frases. Também foram sugeridas melhorias em algumas poucas frases. Com o segundo validador tivemos apenas dois ajustes em frases. Para efeitos de viés, as respostas dos validadores não foram consideradas.

Após a validação das frases, executamos um teste piloto com dois desenvolvedores, do qual, não solicitaram alterações no questionário, considerando-o apropriado para lançamento. Essas respostas foram consideradas visto que o \textit{feedback} foi positivo e não houve necessidade de ajustes.

O questionário foi divulgado em redes sociais como Reddit, Facebook, Twitter e Linkedin, grupos de discussão sobre Android como \href{https://groups.google.com/forum/#!forum/androidbrasil-dev}{\textit{Android Dev Brasil}}, \href{https://groups.google.com/forum/\#!forum/android-brasil--projetos}{\textit{Android Brasil Projetos}} e o grupo do \href{http://slack.androiddevbr.org/}{\textit{Slack Android Dev Br}}, maior grupo de desenvolvedores Android do Brasil com 2622 participantes até o momento desta escrita. Para engajar os respondentes ofertamos o sorteio de um Google Chromecast Áudio. O questionário esteve aberto por aproximadamente 3 semanas em meados de Setembro de 2017. As questões eram apresentadas de forma randômica. Ao final, o questionário foi respondido por 201 desenvolvedores. A versão completa do questionário pode ser conferida no Apêndice \ref{survey2}. 



\subsubsection{Participantes}
\label{etapa-2-participantes}
 
\begin{figure*}[!t]
\centering
\begin{subfigure}{.49\textwidth}
  \centering
  \includegraphics[width=.85\textwidth]{phase2-participants-experience.png}
  \caption{Experiência}
  \label{fig:phase1-participants-experience}
\end{subfigure}
\begin{subfigure}{.49\textwidth}
  \centering
  \includegraphics[width=.94\textwidth]{phase2-participants-regions.png}
  \caption{Distribuição geográfica}
  \label{fig:phase1-participants-regions}
\end{subfigure}% 
\caption{Experiência com desenvolvimento de software, desenvolvimento Android e distribuição geográfica dos participantes de \emph{Q2}.}
\label{fig:all-resources}
\vspace{-.5cm} 
\end{figure*}


\subsubsection{Análise dos Dados}
\label{etapa-2-analise}

Para análise dos dados extraímos a moda e distribuição relativa de cada frase das seções dois e três. Consideramos como maus cheiros \emph{percebidos} todos aqueles com \emph{moda de importância} ($I_{Moda}$) maior igual a 4 e \emph{moda de frequência} ($F_{Moda}$) maior igual a 3. Ou seja:

\begin{center}
  $F_{Moda} > 3 \cup I_{Moda} \geq 4 \implies Mau Cheiro$ 
\end{center} 

As Tabelas \ref{tab:SmellFrequency} e \ref{tab:SmellImportance} apresentam respectivamente a moda e distribuição relativa de frequência e importância para cada um dos 21 maus cheiros derivados. Em vermelho são os que não atendem a condição mencionada acima e portanto, são desconsiderados para a etapa seguinte.

\begin{table}[h]
\centering
\renewcommand*{\arraystretch}{1}
\footnotesize 
\begin{tabular}{@{}p{6cm}cccccc@{}}
\toprule
\textbf{Mau Cheiro}    & \textbf{Moda} & \textbf{1}    & \textbf{2}    & \textbf{3}    & \textbf{4}    & \textbf{5}    \\
\toprule
\textsc{Classe de UI Inteligente}          & 4     & 7\% & 19\%  & 27\% & 28\% & 19\%    \\
\textsc{Classe de UI Acoplada}             & 3     & 7\% & 20\%  & 33\% & 24\% & 15\%    \\
\textsc{Comportamento Suspeito}            & 3     & 11\%  & 14\%  & 33\% & 22\% & 19\%  \\
\textsc{Referência Morta}                  & 3     & 14\%  & 17\%  & 29\% & 26\% & 13\%  \\
\textsc{Classes de UI Fazendo IO}          & 3     & 17\%  & 20\%  & 26\% & 23\% & 14\%  \\
\textsc{Arquitetura Não Identificada}      & 3     & 13\%  & 20\%  & 27\% & 20\% & 18\%  \\
\textsc{Adapter Complexo}                  & 3     & 7\% & 21\%  & 32\% & 25\% & 14\%    \\
\textsc{Recursos Mágicos}                  & 4     & 10\%  & 22\%  & 23\% & 28\% & 16\%  \\
\textsc{Nome de Recurso Despadronizado}    & 3     & 11\%  & 22\%  & 26\% & 25\% & 16\%  \\
\textsc{Layout Profundamente Aninhado}     & 4     & 2\% & 11\%  & 22\% & 36\% & 28\%    \\
\textsc{Imagem Dispensável}                & 4     & 11\%  & 19\%  & 24\% & 30\% & 14\%  \\
\textsc{Layout Longo ou Repetido}          & 4     & 4\% & 13\%  & 29\% & 37\% & 17\%    \\
\textsc{Imagem Faltante}                   & 4     & 15\%  & 24\%  & 21\% & 29\% & 11\%  \\
\textsc{Longo Recurso de Estilo}           & 5     & 5\% & 11\%  & 23\% & 28\% & 32\%    \\
\textsc{Recurso de String Bagunçado}       & 5     & 6\% & 8\% & 20\% & 32\% & 33\%      \\
\textsc{Atributos de Estilo Repetidos}     & 4     & 5\% & 13\%  & 31\% & 35\% & 15\%    \\

\textsc{Reuso Inadequadro de String}               & 4 & 5\%  &  9\%   &   22\%   &  34\% &  29\%  \\   
\textcolor{red}{\textsc{Listener Escondido}}                        & \textcolor{red}{2} & \textcolor{red}{24\%}   & \textcolor{red}{30\%}   & \textcolor{red}{ 19\%}  & \textcolor{red}{ 16\%} & \textcolor{red}{ 10\%}  \\   
\textcolor{red}{\textsc{Adapter Consumista}}                        & \textcolor{red}{2} & \textcolor{red}{25\%}   & \textcolor{red}{29\%}   & \textcolor{red}{ 23\%}  & \textcolor{red}{ 17\%} & \textcolor{red}{ 5\%}  \\   
\textsc{Uso Excessivo de Fragment}                 & 3 & 8\%  &  20\%  &  30\%  &  27\% &  15\%  \\   
\textcolor{red}{\textsc{Não Uso de Fragment}}                       & \textcolor{red}{2} & \textcolor{red}{15\%}   & \textcolor{red}{32\%}   & \textcolor{red}{ 26\%}  & \textcolor{red}{ 16\%} & \textcolor{red}{ 10\%}  \\   

\toprule
\multicolumn{7}{@{}l}{1 = Nunca, 2 = Raramente, 3 = As vezes, 4 = Frequente e 5 = Muito frequente.} \\
\bottomrule
\end{tabular}
\caption{Moda e distribuição relativa sobre percepção da frequência dos maus cheiros por desenvolvedores Android.}
\label{tab:SmellFrequency}
\end{table}

\begin{table}[h]
\centering
\renewcommand*{\arraystretch}{1}
\footnotesize 
\begin{tabular}{@{}p{6cm}cccccc@{}}
\toprule
\textbf{Mau Cheiro}    & \textbf{Moda} & \textbf{1}    & \textbf{2}    & \textbf{3}    & \textbf{4}    & \textbf{5} \\
\toprule
\textsc{Classe de UI Inteligente}          &  5     & 3\% & 3\%   & 15\%  & 25\% &  53\% \\
\textsc{Classe de UI Acoplada}             &  5     & 2\% & 6\%   & 21\%  & 33\% &  37\% \\
\textsc{Comportamento Suspeito}            &  4     & 7\% & 17\%  & 27\%  & 28\% &  20\% \\
\textsc{Referência Morta}                  &  5     & 1\% & 2\%   & 11\%  & 26\% &  59\% \\
\textsc{Classes de UI Fazendo IO}          &  5     & 2\% & 6\%   & 13\%  & 19\% &  60\% \\
\textsc{Arquitetura Não Identificada}      &  5     & 1\% & 2\%   & 9\%   & 18\% &  69\% \\
\textsc{Adapter Complexo}                  &  5     & 1\% & 3\%   & 14\%  & 35\% &  46\% \\
\textsc{Recursos Mágicos}                  &  5     & 1\% & 6\%   & 15\%  & 30\% &  47\% \\
\textsc{Nome de Recurso Despadronizado}    &  5     & 1\% & 3\%   & 11\%  & 25\% &  59\% \\
\textsc{Layout Profundamente Aninhado}     &  4     & 5\% & 10\%  & 25\%  & 35\% &  23\% \\
\textsc{Imagem Dispensável}                &  5     & 1\% & 5\%   & 13\%  & 33\% &  47\% \\
\textsc{Layout Longo ou Repetido}          &  5     & 2\% & 3\%   & 16\%  & 33\% &  45\% \\
\textsc{Imagem Faltante}                   &  5     & 2\% & 4\%   & 10\%  & 27\% &  57\% \\
\textsc{Longo Recurso de Estilo}           &  4     & 2\% & 15\%  & 26\%  & 35\% &  20\% \\
\textsc{Recurso de String Bagunçado}       &  4     & 9\% & 21\%  & 23\%  & 31\% &  16\% \\
\textsc{Atributos de Estilo Repetidos}     &  4     & 1\% & 2\%   & 17\%  & 41\% &  38\% \\

\textcolor{red}{\textsc{Reuso Inadequadro de String}} & \textcolor{red}{3} & \textcolor{red}{16\%} & \textcolor{red}{20\%} & \textcolor{red}{26\%} & \textcolor{red}{23\%} & \textcolor{red}{14\%} \\
\textsc{Listener Escondido}                        & 5 & 7\% &  9\%  & 26\% & 24\% & 33\% \\
\textsc{Adapter Consumista}                        & 5 & 1\% &  4\%  & 9\%  & 26\% & 58\% \\
\textcolor{red}{\textsc{Uso Excessivo de Fragment}} & \textcolor{red}{3} & \textcolor{red}{21\%} & \textcolor{red}{14\%} & \textcolor{red}{28\%} & \textcolor{red}{20\%} & \textcolor{red}{16\%} \\
\textsc{Não Uso de Fragment}                       & 4 & 19\% & 15\% & 24\% & 26\% & 15\% \\
\toprule
\multicolumn{7}{@{}p{12cm}}{1 = Não é importante, 2 = Pouco importante, 3 = Razoavelmente importante, 4 = Importante e 5 = Muito.} \\
\bottomrule
\end{tabular}
\caption{Moda e distribuição relativa sobre percepção de importância dos maus cheiros por desenvolvedores Android.}
\label{tab:SmellImportance}
\end{table}



\subsection{Etapa 3 - Percepção dos maus cheiros}
\label{etapa-3}

% \todo{[Nota revisor SBES] Por que vocês resolveram incluir maus cheiros tradicionais na avaliação? Que maus cheiros tradicionais foram levados em conta? Como vocês determinaram os códigos que tinham maus cheiros tradicionais?}

\subsubsection{Experimento}
\todo{Ainda não escrito pois estamos finalizando como será feito.}

\subsubsection{Participantes}
\label{sub:perception-participants}
\todo{Ainda não escrito pois estamos finalizando como será feito.}
% Todos os participantes exceto 1, são atualmente desenvolvedores Android profissionais, ou seja, atuam profissionalmente com a plataforma Android. 70\% responderam com seu email para receber resultados da pesquisa, tal como em \textit{S1}, pode ser um indicativo de interesse legítimo da comunidade sobre esta temática. Questionamos da experiência com desenvolvimento de software, bem como com desenvolvimento Android, notamos que 55\% relataram ter mais de 5 aplicativos publicados e 47\% tinham mais de 4 anos de experiência com Android. A experiência dos desenvolvedores pode ser visualizada na Figura \ref{fig:ExpDevsS2}.

\subsubsection{Análise dos Dados}
\label{sub:perception-participants-analysis}
\todo{Aguardando dois anteriores para ser escrito. Mas basicamente extrairemos dados estatísticos cliff e wilcoxon.}

% Nossa análise consistiu em investigar a percepção dos desenvolvedores sobre códigos limpos, códigos afetados pelas más práticas e códigos afetados por maus cheiros tradicionais, exemplo, Classe Deus/Longa ou Método Longo. Dividimos a análise da percepção em dois grupos: más práticas que afetam apenas códigos Java, no caso apenas a LCUI, e más práticas que afetam apenas recursos da aplicação, no caso LPA, NRD e RM.

% Para o grupo de más práticas que afetam código Java, analisamos a percepção dos desenvolvedores a partir de três comparações: classes afetadas pela má prática vs. classes limpas, classes afetadas pela má prática vs. classes afetadas por maus cheiros tradicionais e por fim, classes afetadas por maus cheiros tradicionais vs. classes limpas. Para o grupo de más práticas que afetam apenas recursos da aplicação, analisamos a percepção dos desenvolvedores a partir da comparação entre códigos afetados pela má prática vs. códigos limpos.

% não tenho certeza se deveria estar <= a 0,05 ou como estava, = 0,05
% Para comparar as distribuições da severidade indicada pelos participantes, utilizamos o teste de Mann-Whitney não pareado \cite{Conover1999} para analisar a significância estatística das diferenças entre a severidade atribuída pelos participantes aos problemas que observam em códigos Android cheirosos e códigos limpos. Os resultados são considerados estatisticamente significativos em $\alpha$ $\leq{=}$ 0,05. Também estimamos a magnitude das diferenças medidas usando o Delta de Cliff (ou d), uma medida de tamanho do efeito não paramétrico \cite{GrissomKim2005} para dados ordinais. Seguimos diretrizes bem estabelecidas para interpretar os valores do tamanho do efeito: insignificante para | d | $<$ 0,14, baixo para 0,14 $\leq$ | d | $<$ 0,33, médio para 0,33 $\leq$ | d | $<$ 0,474, e alto para | d | $\geq$ 0,474 [49]. Finalmente, relatamos achados qualitativos derivados das respostas abertas dos participantes.


% \section{Processo de Escrita dos Maus Cheiros}

% Em construção.

% \subsection{Classificação dos Maus Cheiros}

