% -*- root:dissertation.tex -*-
O objetivo desta pesquisa é catalogar maus cheiros da camada de apresentação Android. Deste modo, optamos por realizar uma pesquisa exploratória de gênero empírico e de abordagem mista~\cite{CreswellResearch:13}. Segundo pesquisas \cite{arcoverde2011understanding, Palomba_Do_2014, yamashita2013developers}, a percepção empírica desempenha um importante papel na definição de maus cheiros de código relacionados a uma tecnologia específica. Principalmente considerando a natureza subjetiva intrínseca a maus cheiros \cite{JavaQADetectingSmells:02, JavascriptSmells}.

Nossa abordagem mista se apresenta de forma que os maus cheiros são originados a partir de dados qualitativos coletados por meio de dois questionários online respondidos por 246 desenvolvedores Android. Os dados quantitativos provêm de um experimento de código online onde obtivemos 70 respostas, pelo qual avaliamos a percepção de desenvolvedores Android sobre códigos afetados por 7 dos 21 maus cheiros propostos. Com esses dados foi possível extrair estatísticas relacionados a percepção dos maus cheiros que comprovam à percepção sobre seis dos maus cheiro avaliados.

Esta pesquisa foi realizada em três etapas conforme apresentado na Figura \ref{fig:ResearchPhases}. Cada qual objetivando responder a uma questão de pesquisa. Nesta seção apresentamos detalhes sobre cada etapa bem como a qual questão de pesquisa pretendia-se responder.

\begin{figure}[!htb]
  \centering
  \includegraphics[width=.7\textwidth]{etapas-pesquisa2.png}
  \caption{Etapas da pesquisa.}
  \label{fig:ResearchPhases}
\end{figure}

% São muitos os motivos válidos para se fazer pesquisa qualitativa, dentre eles, os que melhor nos serve de motivação é a natureza do problema, no caso maus cheiros de código e obter mais informações sobre uma área cujo ainda se sabe muito pouco, no caso, maus cheiros específicos ao Android \cite{Strauss2007}. Uma pesquisa qualitativa constitui-se na primeira etapa de uma investigação mais ampla na qual se busca o entendimento de um assunto específico por meio de descrições, comparações e interpretações dos dados \cite{Prates2015}.

% Algumas características básicas da pesquisa qualitativa, como \textit{a)} o foco na interpretação que os participantes possuem quanto à situação investigada e \textit{b)} o fato de enfatizar a subjetividade e a flexibilidade, orientando-se para o processo e não para o resultado, justificam seu uso nesta pesquisa \cite{Prates2015, King1994}.

% Além disso, na análise dos dados coletados, não há preocupação em comprovar hipóteses previamente estabelecidas. Algumas características básicas da pesquisa qualitativa, como \textit{a)} o fato de não apresentar foco na quantificação, apresentando-se centrada na interpretação que os participantes possuem quanto à situação investigada e \textit{b)} o fato de enfatizar a subjetividade e a flexibilidade no processo de condução da pesquisa, orientando-se para o processo e não para o resultado, justificam seu uso neste artigo \cite{Prates2015, King1994}.

% Maus cheiros desempenham um importante papel na busca por qualidade de código, visto que, após mapeados, podemos chegar a heurísticas para identificá-los e com essas heurísticas, implementar ferramentas que automatizem o processo de identificar códigos problemáticos.


% \section{Questões de Pesquisa}

% Maus cheiro são sintomas que podem indicar um problema mais profundo no código \cite{Refactoring:99}. Geralmente são derivados da experiência e opinião de desenvolvedores \cite{JavaQADetectingSmells:02} ou seja, são por natureza subjetivos \cite{JavascriptSmells}. Entretanto, há evidências na literatura que sugerem que maus cheiros são percebidos por desenvolvedores \cite{Palomba_Do_2014}. 

% \begin{center}
% \textbf{QP$_1$. Existem maus cheiros que são específicos ao \textit{front-end} Android?}
% \end{center}

% Um mau cheiro de código, como vimos em detalhes na Seção X.X, são sintomas que podem indicar um problema mais profundo no código. Estes sintomas são extraído do conhecimento empírico de desenvolvedores experientes, de forma que, se vários desenvolvedores consideram determinado código como uma má prática, podemos entender esta má prática como um sintoma, logo, um mau cheiro. Iniciamos a pesquisa com algumas hipóteses de quais práticas poderiam ser consideradas más práticas, e portanto exalando um mau cheiro, no desenvolvimento da camada de apresentação Android. Uma dessa situações hipotéticas foi, por exemplo, o uso de textos, cores e tamanhos diretamente no XML de layout, sem a criação de um novo recurso, respectivamente nos arquivos \texttt{strings.xml}, \texttt{colors.xml} ou \texttt{dimens.xml}. Para validarmos essas hipóteses iniciais, perguntamos a desenvolvedores Android o que eles consideravam como boas e más práticas no desenvolvimento da camada de apresentação Android. Obtivemos 45 respostas dos quais pudemos extrair 25 possíveis maus cheiros dos quais confirmaram nossas hipóteses iniciais.


% \begin{center}
% \textbf{QP$_2$. Quais maus cheiros são vistos com mais frequência e quais são considerados mais importantes?}
% \end{center}

% A fim de validar a existência e relevância dos maus cheiros derivados, submetemos um novo questionário online questionando os desenvolvedores Android o quanto eles percebiam os sintomas dos maus cheiros no seu dia a dia e o quanto eles consideravam importante mitigar aqueles sintomas. Obtivemos 196 respostas dos quais entendemos que 3 dos maus cheiros derivados não eram relevantes aos desenvolvedores, finalizando então com 21 maus cheiros de código Android.

% \begin{center}
% \textbf{QP$_3$. Códigos afetados pelos maus cheiros são percebidos como códigos problemáticos?}
% \end{center}


% A fim de validar a percepção dos maus cheiros pelos desenvolvedores em códigos Android, realizamos um experimento com 75 desenvolvedores onde apresentamos randomicamente códigos Android afetados pelos maus cheiros e códigos limpos e perguntávamos a cada código, se o participante percebia aquele código como problemático, se sim, qual a gravidade do problema e qual o problema percebido. Ao final deste processo descartamos mais 3 maus cheiros pois não se mostraram percebidos por desenvolvedores e concluímos com 19. Através do resultado desse experimento conseguimos extrair dados para realizar uma análise estatística da percepção dos desenvolvedores por meio das métricas p-value e cliff d [descrever aqui para que servem e pq são boas neste caso].

\section{Etapas da Pesquisa}

A primeira etapa objetiva responder a {\small \textbf{QP$_1$: Existem maus cheiros que são específicos a camada de apresentação Android?}} Visto que maus cheiros possuem uma relação direta com o conhecimento empírico de desenvolvedores, optamos por um questionário exploratório online para obter os dados iniciais \cite{arcoverde2011understanding, Palomba_Do_2014, yamashita2013developers}. Nosso objetivo foi entender o que desenvolvedores Android consideram como boas e más práticas no desenvolvimento da camada de apresentação de aplicativos Android. Obtivemos 45 respostas das quais realizamos um processo de codificação e derivamos 21 maus cheiros de código relacionados à camada de apresentação Android. Apresentamos na Seção \ref{etapa-1} os detalhes desta etapa. 

%  Colocar isso na seção específica ou aqui mesmo
%  pois como mencionado na Seção X.X [ref teórico], maus cheiros de código bem como outras boas práticas de software são derivações de conhecimento empírico

Na segunda etapa, objetivamos responder a {\small \textbf{QP$_2$. Com qual frequência os maus cheiros são percebidos e o quão importante são considerados pelos desenvolvedores?}} Os dados foram coletados a partir de um segundo questionário online respondido por 201 desenvolvedores Android. Nessa etapa foi possível validar a percepção de frequência e a importância dos 21 maus cheiros no dia a dia do desenvolvimento Android, sendo todos considerados com algum nível de importância e frequência. Apresentamos os detalhes desta etapa na Seção~\ref{etapa-2}. 

Na terceira e última etapa, objetivamos responder a {\small \textbf{QP$_3$. Desenvolvedores Android percebem os códigos afetados pelos maus cheiros como problemáticos?}} Coletamos os dados a partir de um experimento de código online respondido por 70 desenvolvedores Android. Com esses dados foi possível extrair estatísticas sobre a percepção de desenvolvedores Android com relação a 7 mais importantes e frequentes maus cheiros derivados em {\small \textbf{QP$_1$}}. Os detalhes desta etapa são apresentados na Seção~\ref{etapa-3}.

Por fim, concluímos com 21 maus cheiros relacionados à camada de apresentação Android, considerados importantes e frequentes por desenvolvedores. Avaliamos a percepção no código de 7 deles, os mais importantes e frequentes, e extraímos dados estatísticos que comprovam que desenvolvedores percebem códigos afetados por seis deles como códigos problemáticos. O catálogo com os 21 maus cheiros é apresentado na Seção~\ref{phase1-code-smells-catalog}.

% \subsection{Participantes}
% \todo{Colocar um resumo aqui sobre todos os participantes.}

% \todo{Abordar sobre a composição dos participantes, em termos de nacionalidade. Podemos adicionar tb um trecho em ameaças a validade, visto que em sua maioria as respostas foram de brasileiros}

