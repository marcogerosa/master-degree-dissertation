% -*- root: dissertation.tex -*-
\section{QP2. Com qual frequência os maus cheiros são percebidos e o quão importante são considerados pelos desenvolvedores?}
\label{phase2-results}

\begin{square}
  \small
  Nossos resultados mostraram que todos os 21 maus cheiros derivados são considerados de ``razoavelmente importantes'' a ``muito importantes'' e 18 deles se apresentam no dia a dia do desenvolvimento Android com frequência de ``ás vezes'' até ``muito frequente''. 
\end{square}


Nossos resultados mostraram que os 21 maus cheiros derivados são considerados, em diferentes níveis, como importantes e se apresentam com diferentes frequências no dia a dia do desenvolvimento Android. Para os maus cheiros que foram apresentadas no questionário mais de uma afirmação de importância ou frequência, se mostraram com distribuição relativa muito semelhantes, variando de 6\% a no máximo 10\% de uma afirmação a outra. A distribuição relativa de frequência para cada frase pode ser vista nos Apêndices \ref{appendix-phase2-frequence-table} (distribuição relativa sobre as afirmações de frequência) e \ref{appendix-phase2-importance-table} (distribuição relativa sobre as afirmações de importância).

A seguir apresentamos a Tabela \ref{tab:SmellFrequencyImportance} consolidando a moda (MO), média (ME) e desvio padrão (DP) de importância e frequência para cada um dos maus cheiros derivados. Com base no DP, podemos observar que, de modo geral, existe uma concordância maior sobre a importância dos maus cheiros do que sobre a frequência, pois a média do DP de importância é de 1,05, ligeiramente menor que a média do DP de frequência, que é de 1,19. 

\begin{table}[!htb]
\centering
\renewcommand*{\arraystretch}{1}
\footnotesize 
\caption{Desvio padrão, moda e média sobre a percepção da importância dos maus cheiros relacionados a componentes do \textit{front-end} Android.}
\begin{tabular}{@{}p{7cm}cccccc@{}}
\toprule
 & \multicolumn{3}{c}{\textbf{Importância}} & \multicolumn{3}{c}{\textbf{Frequência}} \\
\textbf{Mau Cheiro} & \textbf{ME} & \textbf{MO} & \textbf{DP} & \textbf{ME} & \textbf{MO} & \textbf{DP} \\
\bottomrule
\textsc{Componente de UI Inteligente} & 5 & 5 & 1,05 & 3 & 4 & 1,19 \\ 
\textsc{Recurso Mágico} & 4 & 5 & 1,00 & 3 & 4 & 1,24 \\ 
\textsc{Imagem Tradicional Dispensável} & 4 & 5 & 0,95 & 3 & 4 & 1,23 \\ 
\textsc{Layout Longo ou Repetido} & 4 & 5 & 0,95 & 4 & 4 & 1,07 \\ 
\textsc{Imagem Faltante} & 5 & 5 & 0,95 & 3 & 4 & 1,25 \\ 
\textsc{Componente de UI Acoplado} & 4 & 5 & 1,02 & 3 & 3 & 1,15 \\ 
\textsc{Classes de UI Fazendo IO} & 5 & 5 & 1,03 & 3 & 3 & 1,29 \\ 
\textsc{Componente de UI Zumbi} & 5 & 5 & 0,88 & 3 & 3 & 1,16 \\ 
\textsc{Ausência de Arquitetura} & 5 & 5 & 0,82 & 3 & 3 & 1,30 \\ 
\textsc{Adapter Complexo} & 4 & 5 & 0,91 & 3 & 3 & 1,15 \\ 
\textsc{Nome de Recurso Despadronizado} & 5 & 5 & 0,88 & 3 & 3 & 1,24 \\ 
\textsc{Adapter Consumista} & 5 & 5 & 0,93 & 2 & 2 & 1,20 \\ 
\textsc{Listener Escondido} & 4 & 5 & 1,23 & 2 & 2 & 1,29 \\ 
\textsc{Longo Recurso de Estilo} & 4 & 4 & 1,06 & 4 & 5 & 1,18 \\ 
\textsc{Recurso de String Bagunçado} & 3 & 4 & 1,22 & 4 & 5 & 1,18 \\ 
\textsc{Comportamento Suspeito} & 3 & 4 & 1,19 & 3 & 4 & 1,19 \\ 
\textsc{Layout Profundamente Aninhado} & 4 & 4 & 1,12 & 4 & 4 & 1,06 \\ 
\textsc{Atributos de Estilo Repetidos} & 4 & 4 & 0,86 & 4 & 4 & 1,11 \\ 
\textsc{Não Uso de Fragment} & 3 & 4 & 1,34 & 3 & 2 & 1,21 \\ 
\textsc{Reuso Inadequado de String} & 3 & 3 & 1,29 & 4 & 4 & 1,12 \\ 
\textsc{Uso Excessivo de Fragment} & 3 & 3 & 1,36 & 3 & 3 & 1,17 \\ 
\bottomrule
\textbf{DP Médio} &  &  & 1.05 &  &  & 1.19 \\ 
\toprule
\multicolumn{7}{@{}l@{}}{DP = Desvio Padrão, MO = Moda, ME = Média.} \\
\bottomrule
\end{tabular}
\label{tab:SmellFrequencyImportance}
\end{table}

De modo geral, ainda com base na Tabela \ref{tab:SmellFrequencyImportance}, todos os maus cheiros apresentaram MO de importância maior ou igual a 3, ou seja, de ``razoavelmente importante'' a ``muito importante''. Entretanto, com relação a frequência, três maus cheiros apresentaram MO igual a 2, ``raramente'', e todos os demais apresentaram MO maior ou igual a 3, ou seja, de ``ás vezes'' até ``muito frequente''. Entendemos este resultado de forma positiva pois, apesar de alguns sintomas não serem tão frequentes, ainda assim são considerados com importância relevante de se mitigar, reforçando também a relevância desta pesquisa pois damos os primeiros passos no sentido da automatização da identificação desses maus cheiros.

\subsection{Importância dos Maus Cheiros}

Com relação a importância dos maus cheiros, podemos observar na Tabela \ref{tab:SmellFrequencyImportance}, que 13 apresentaram MO igual a 5, ou seja, foram considerados majoritariamente ``muito importantes''. Desses, 7 (\textsc{\small Adapter Complexo}, \textsc{\small Adapter Consumista}, \textsc{\small Ausência de Arquitetura}, \textsc{\small Classes de UI Fazendo IO}, \textsc{\small Componente de UI Acoplado}, \textsc{\small Componente de UI Inteligente}, \textsc{\small Componente de UI Zumbi}) são maus cheiros relacionados a componentes do \textit{front-end} Android e 6 (\textsc{\small Imagem Faltante}, \textsc{\small Imagem Tradicional Dispensável}, \textsc{\small Layout Longo ou Repetido}, \textsc{\small Listener Escondido}, \textsc{\small Nome de Recurso Despadronizado}, \textsc{\small Recurso Mágico}) relacionados a recursos. Com MO igual a 4, ou seja, majoritariamente ``importantes'', tivemos 6 maus cheiros, dos quais 2 são relacionados a componentes do \textit{front-end} Android (\textsc{\small Comportamento Suspeito}, \textsc{\small Não Uso de Fragment}) e 4 (\textsc{\small Atributos de Estilo Repetidos}, \textsc{\small Layout Profundamente Aninhado}, \textsc{\small Longo Recurso de Estilo}, \textsc{\small Recurso de String Bagunçado}) relacionados a recursos Android.

\begin{table}[!htb]
\centering
\renewcommand*{\arraystretch}{1}
\footnotesize 
\caption{Desvio padrão, moda e média sobre a percepção da importância dos maus cheiros relacionados a componentes do \textit{front-end} Android.}
\begin{tabular}{@{}p{5.2cm}p{5.2cm}p{5.2cm}@{}}
\toprule
\multicolumn{1}{c}{\textbf{Muito Importante}} & \multicolumn{1}{c}{\textbf{Importante}} & \multicolumn{1}{c}{\textbf{Razoavelmente Importante}} \\ 
\bottomrule
\textsc{\scriptsize Adapter Complexo} & \textsc{\scriptsize Atributos de Estilo Repetidos} & \textsc{\scriptsize Reuso Inadequado de String} \\ 
\textsc{\scriptsize Adapter Consumista} & \textsc{\scriptsize Comportamento Suspeito} & \textsc{\scriptsize Uso Excessivo de Fragment} \\ 
\textsc{\scriptsize Ausência de Arquitetura} & \textsc{\scriptsize Layout Profundamente Aninhado} & \textsc{\scriptsize } \\ 
\textsc{\scriptsize Classes de UI Fazendo IO} & \textsc{\scriptsize Longo Recurso de Estilo} & \textsc{\scriptsize } \\ 
\textsc{\scriptsize Componente de UI Acoplado} & \textsc{\scriptsize Não Uso de Fragment} & \textsc{\scriptsize } \\ 
\textsc{\scriptsize Componente de UI Inteligente} & \textsc{\scriptsize Recurso de String Bagunçado} & \textsc{\scriptsize } \\ 
\textsc{\scriptsize Componente de UI Zumbi} & \textsc{\scriptsize } & \textsc{\scriptsize } \\ 
\textsc{\scriptsize Imagem Faltante} & \textsc{\scriptsize } & \textsc{\scriptsize } \\ 
\textsc{\scriptsize Imagem Tradicional Dispensável} & \textsc{\scriptsize } & \textsc{\scriptsize } \\ 
\textsc{\scriptsize Layout Longo ou Repetido} & \textsc{\scriptsize } & \textsc{\scriptsize } \\ 
\textsc{\scriptsize Listener Escondido} & \textsc{\scriptsize } & \textsc{\scriptsize } \\ 
\textsc{\scriptsize Nome de Recurso Despadronizado} & \textsc{\scriptsize } & \textsc{\scriptsize } \\ 
\textsc{\scriptsize Recurso Mágico} & \textsc{} & \textsc{} \\ 
\toprule
\multicolumn{1}{c}{13} & \multicolumn{1}{c}{6} & \multicolumn{1}{c}{2} \\ 
\bottomrule
\end{tabular}
\label{tab:SmellFrequencyImportance}
\end{table}

Enquanto isso, apenas 2 maus cheiros (\textsc{\small Reuso Inadequado de String}, \textsc{\small Uso Excessivo de Fragment}), um relacionado a componentes do \textit{front-end} Android e outro a recursos, apresentaram MO igual a 3, ``razoavelmente importante''. Nenhum mau cheiro foi considerado majoritariamente ``pouco importante'' ou ``não importante''.

Os maus cheiros que tiveram maior concordância com relação a sua importância, ou seja, DP menor que 1, foram: \textsc{\small Adapter Complexo}, \textsc{\small Adapter Consumista}, \textsc{\small Atributos de Estilo Repetidos}, \textsc{\small Ausência de Arquitetura}, \textsc{\small Componente de UI Zumbi}, \textsc{\small Imagem Faltante}, \textsc{\small Imagem Tradicional Dispensável}, \textsc{\small Layout Longo ou Repetido}, \textsc{\small Nome de Recurso Despadronizado}. Os maus cheiros com menor concordância com relação a importância são os: \textsc{\small Não Uso de Fragment}, \textsc{\small Reuso Inadequado de String}, \textsc{\small Uso Excessivo de Fragment}, todos com DP acima de 1,28.

A Figura \ref{fig:phase2-results-importance} apresenta a distribuição relativa de importância dos maus cheiros. Apresentamos negativo (em vermelho) o percentual relacionado as respostas ``não é importante''. Demais respostas são apresentadas como positivas pois apesar de representarem importâncias em diferentes graus, ainda assim são considerados importantes. Os maus cheiros considerados menos importantes, com pelo menos 16\% de respostas ``não é importante'' são: \textsc{\small Reuso Inadequado de String} (16\%), \textsc{\small Não Uso de Fragment} (19\%), \textsc{\small Uso Excessivo de Fragment} (21\%).

\begin{figure*}[!htb]
  \centering
  \includegraphics[width=.98\textwidth]{phase2-results-importance.png}
  \caption{Distribuição relativa de importância dos 21 maus cheiros derivados.}
  \label{fig:phase2-results-importance}
  % \vspace{-.5cm} 
\end{figure*}



\subsection{Frequência dos Maus Cheiros}

\begin{table}[!htb]
\centering
\renewcommand*{\arraystretch}{1}
\footnotesize 
\caption{Desvio padrão, moda e média sobre a percepção da importância dos maus cheiros relacionados a componentes do \textit{front-end} Android.}
\begin{tabular}{@{}p{2.8cm}p{4.5cm}p{4.3cm}p{3.2cm}@{}}
\toprule
\multicolumn{1}{c}{\textbf{Muito Frequente}} & \multicolumn{1}{c}{\textbf{Frequente}} & \multicolumn{1}{c}{\textbf{Ás Vezes}} & \multicolumn{1}{c}{\textbf{Raramente}} \\ 
\bottomrule
\textsc{\scriptsize Recurso de String Bagunçado} & \textsc{\scriptsize Atributos de Estilo Repetidos} & \textsc{\scriptsize Adapter Complexo} & \textsc{\scriptsize Adapter Consumista} \\ 
\textsc{\scriptsize } & \textsc{\scriptsize Imagem Faltante} & \textsc{\scriptsize Classes de UI Fazendo IO} & \textsc{\scriptsize Não Uso de Fragment} \\ 
\textsc{\scriptsize } & \textsc{\scriptsize Componente de UI Inteligente} & \textsc{\scriptsize Ausência de Arquitetura} & \textsc{\scriptsize Listener Escondido} \\ 
\textsc{\scriptsize } & \textsc{\scriptsize Reuso Inadequado de String} & \textsc{\scriptsize Componente de UI Acoplado} & \textsc{\scriptsize } \\ 
\textsc{\scriptsize } & \textsc{\scriptsize Layout Longo ou Repetido} & \textsc{\scriptsize Componente de UI Zumbi} & \textsc{\scriptsize } \\ 
\textsc{\scriptsize } & \textsc{\scriptsize Longo Recurso de Estilo} & \textsc{\scriptsize Comportamento Suspeito} & \textsc{\scriptsize } \\ 
\textsc{\scriptsize } & \textsc{\scriptsize Recurso Mágico} & \textsc{\scriptsize Uso Excessivo de Fragment} & \textsc{\scriptsize } \\ 
\textsc{\scriptsize } & \textsc{\scriptsize Layout Profundamente Aninhado} & \textsc{\scriptsize Nome de Recurso Despadronizado} & \textsc{\scriptsize } \\ 
\textsc{\scriptsize } & \textsc{\scriptsize Imagem Tradicional Dispensável} & \textsc{\scriptsize } & \textsc{\scriptsize } \\ 
\toprule
\multicolumn{1}{c}{1} & \multicolumn{1}{c}{9} & \multicolumn{1}{c}{8} & \multicolumn{1}{c}{3} \\ 
\bottomrule
\end{tabular}
\label{tab:SmellFrequencyImportance}
\end{table}


Com relação a frequência, 2 maus cheiros apresentaram MO igual a 5, ou seja, majoritariamente muito frequentes. 9 maus cheiros apresentaram MO igual a 4, majoritariamente frequentes. 7 maus cheiros apresentaram MO igual a 3, ou seja, majoritariamente é percebido ás vezes, e apenas 3 apresentaram MO igual a 2, majoritariamente pouco frequentes. 

\begin{figure*}[!htb]
  \centering
  \includegraphics[width=.98\textwidth]{phase2-results-frequence.png}
  \caption{Distribuição relativa de frequência dos 21 maus cheiros derivados.}
  \label{fig:phase2-survey-frequence-java}
  % \vspace{-.5cm} 
\end{figure*}


% A Figura \ref{fig:phase2-survey-frequence-java} apresenta para cada sintoma dos maus cheiros em componentes do \textit{front-end} Android, o percentual de frequência em que ele é percebido no dia a dia de desenvolvimento. Podemos observar que os três maus cheiros mais percebidos frequente ou muito frequentemente por 40\% a 60\% dos respondentes são: \textsc{\small Componente de UI Inteligente}, \textsc{\small Componente de UI Acoplado} e \textsc{\small Comportamento Suspeito}. 

% Se considerarmos a partir de ``Ás vezes'', vemos que todos os maus cheiros derivados relacionados a componentes do \textit{front-end} Android são relevantes pois se apresentam pelo menos 60\% dos respondentes. 

% % Mais de 70\% dos 201 respondentes consideram 7 dos 10 maus cheiros em componentes do \textit{front-end} Android frequentes ou muito frequentes.

% \begin{figure*}[!htb]
%   \centering
%   \includegraphics[width=1\textwidth]{phase2-survey-frequence-java.png}
%   \caption{Mais de 70\% dos 201 respondentes consideram 7 dos 10 maus cheiros em componentes do \textit{front-end} Android frequentes ou muito frequentes.}
%   \label{fig:phase2-survey-frequence-java}
%   % \vspace{-.5cm} 
% \end{figure*}


% A Figura \ref{fig:phase2-survey-frequence-java} apresenta para cada sintoma dos maus cheiros em recursos Android, o percentual de frequência em que é percebida no dia a dia. Podemos observar que esses maus cheiros são percebidos no dia a dia de desenvolvimento muito mais que os maus cheiros em componentes do \textit{front-end} Android. Com exceção do \textsc{\small Listener Escondido}, todos os demais maus cheiros são percebidos frequente ou muito frequentemente por pelo menos 40\% dos respondentes chegando até 65\%. Se considerarmos os que são percebidos ``As vezes'' esses percentuais sobem ainda mais, para pelo menos 60\% e chegando até 88\%.

% \begin{figure*}[!htb]
%   \centering
%   \includegraphics[width=1\textwidth]{phase2-survey-frequence-resource.png}
%   \caption{Percepção dos desenvolvedores sobre a frequência dos maus cheiros em componentes do \textit{front-end} Android.}
%   \label{fig:phase2-survey-frequence-resource}
%   % \vspace{-.5cm} 
% \end{figure*}



% \begin{figure*}[!htb]
%   \centering
%   \includegraphics[width=1\textwidth]{phase2-survey-importance-java.png}
%   \caption{Percepção dos desenvolvedores sobre a frequência maus cheiros em componentes do \textit{front-end} Android.}
%   \label{fig:phase2-survey-importance-java}
%   \vspace{-.5cm} 
% \end{figure*}


% \begin{figure*}[!htb]
%   \centering
%   \includegraphics[width=1\textwidth]{phase2-survey-importance-resource.png}
%   \caption{Percepção dos desenvolvedores sobre a importância de se mitigar os sintomas dos maus cheiros em recursos Android.}
%   \label{fig:phase2-survey-importance-resource}
%   \vspace{-.5cm} 
% \end{figure*}




% COLOCAR DEPOIS 

% As Tabelas \ref{tab:SmellFrequency} e \ref{tab:SmellImportance} apresentam respectivamente a moda e distribuição relativa de frequência e importância para cada um dos 21 maus cheiros derivados. Em vermelho são os que não atendem a condição mencionada acima e portanto, são desconsiderados para a etapa seguinte.

