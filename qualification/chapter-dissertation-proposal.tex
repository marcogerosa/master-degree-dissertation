% -*- root: dissertacao.tex -*-
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setlength{\parindent}{20pt}
\setlength{\textheight}{22cm}
\setlength{\parskip}{0.2cm}
\linespread{1.2} % Para aumentar o espaçamento entre as linhas
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{Proposta de Dissertação}

Esta dissertação objetiva validar a hipótese de que existem cheiros de código específicos à plataforma Android. Da mesma forma que diversas pesquisas \cite{FinavaroAniche2016, DomainMatters, MobileSmells:13} veem demonstrando que há cheiros de código específicos a tecnologias e plataformas. Geoffrey \cite{Hecht2015} afirma que a detecção e especificação de padrões móveis ainda é um problema em aberto e que \textit{antipatterns} Android são mais frequentes em projetos móveis do que \textit{antipatterns} orientado a objetos. Pesquisas em torno de projetos de aplicativos móveis ainda são poucas \cite{Mannan_Dig_Ahmed_Jensen_Abdullah_Almurshed}. Desta forma, neste capítulo é apresentada a proposta da dissertação e o cronograma de atividades planejadas. 

\section{Métodos de Pesquisa}

\subsection{Boas e Más Práticas na Camada de Apresentação}

\textit{God Class}, \textit{Large Class} e \textit{Long Method} são exemplos de cheiros de código amplamente reconhecidos por desenvolvedores [REF]. De fato, é possível obter métricas de qualidade de código de projetos Android utilizando estes cheiros de código já catalogados [REF]. No entanto, pesquisas têm demonstrado que existem cheiros de código de código específicos a tecnologias, frameworks e plataformas \cite{FinavaroAniche2016}, desta forma sugerimos que há cheiros de código específicos à camada de apresentação de aplicativos Android. Para iniciar nossas investigações sobre esse tema, fizemos a seguinte pergunta:

\begin{center}
\textbf{Q1: O que desenvolvedores consideram boas e más práticas com relação à Camada de Apresentação em projetos Android?}
\end{center}

cheiros de código de código são padrões de código que estão associados com um design ruim e más práticas de programação \cite{MobileSmells:13}. Por si só, um mau cheiro não é algo ruim, ocorre que frequentemente ele indica um problema mas não necessariamente é o problema em si \cite{CodeSmell:06}. Sendo assim, esta questão visa identificar quais práticas desenvolvedores Android reconhecem como sendo más práticas, e possivelmente cheiros de código, e quais práticas os desenvolvedores reconhecem como boas práticas, e possivelmente formas de refatorar o que foi considerado um mau cheiro.

Neste Capítulo apresentamos um catálogo de cheiros de código na camada de apresentação de projetos Android. Para derivar esse catálogo aplicamos um questionário respondido por 45 desenvolvedores Android e pretendemos entrevistar outros desenvolvedores sobre boas e más práticas seguidas durante o desenvolvimento de aplicativos Android. Também iremos coletar postagens relacionadas a boas e más práticas em sites sobre Android. Após, iremos realizar um procedimento de código aberto a partir das respostas e postagens obtidas. 

Por fim, pretendemos validar os cheiros de código derivados com 2 desenvolvedores especialistas em Android. 

Nós coletamos boas e más práticas na camada de apresentação seguidas por desenvolvedores durante o desenvolvimento de aplicativos Android. A coleta de dados inclui três diferentes passos, são eles:

\textbf{Passo 1: Questionário Online.} Elaboramos um questionário em inglês com perguntas dissertativas. O questionário foi divulgado em comunidades de desenvolvedores Android do Brasil e exterior e em redes sociais como LinkedIn, Google Plus, Facebook e Twitter. De modo a obtermos alguma análise demográfica, as primeiras questões são sobre idade e país de residência.

Em seguida, perguntamos sobre boas e más práticas. Para cada elemento da camada de apresentação fizemos o seguinte par de perguntas, onde ``X'' indica o elemento da camada de apresentação em questão: 

\begin{itemize}
	\item Do you have any good practices to deal with X? (Você conhece algumas boas práticas para lidar com X?)
	\item Do you have anything you consider a bad practice when dealing whit X? (Você considera algo uma má prática para lidar com X?)
\end{itemize}

Os elementos questionados foram definidos no Capítulo \ref{ch:PresentationLayer}, são eles: \textsc{Activities}, \textsc{Fragments}, \textsc{Adapter}, \textsc{Listeners}, \textsc{layouts}, \textsc{styles}, \textsc{string} e \textsc{drawables}. Os 4 últimos representam os 4 principais recursos de aplicativos Android. Optamos por não questionar todos os tipos de recursos individualmente para não tornar o questionário muito extenso. 

Por último, com o objetivo de capturar alguma outra boa ou má prática em qualquer outro elemento da camada de apresentação, adicionamos as seguintes perguntas:

\begin{itemize}
	\item Are there any other *GOOD* practices in Android Presentation Layer we did not asked you or you did not said yet? (Existe alguma outra *BOA* prática na camada de apresentação que nós não perguntamos a você ou que você ainda não mencionou?)
	\item Are there any other *BAD* practices in Android Presentation Layer we did not asked you or you did not said yet? (Existe alguma outra *MÁ* prática na camada de apresentação que nós não perguntamos a você ou que você ainda não mencionou?)
\end{itemize}

O questionário completo pode ser encontrado no apêndice 1. \\ 

\textbf{Passo 2: Entrevistas Semi-Extruturadas.} Realizaremos entrevistas semi-estruturadas com desenvolvedores Android. O objetivo da entrevista é fazer com que os desenvolvedores discutam sobre boas e más práticas na camada de apresentação Android usadas no dia-a-dia de desenvolvimento. Essas discussões serão focadas nos 8 elementos da camada de apresentação questionados no passo anterior. \\ 

\textbf{Passo 3: Pesquisa Bibliográfica em Sites Técnicos.} Realizaremos uma busca na internet por postagens técnicas sobre Android que apontem alguma boa ou má prática em algum dos elementos da camada de apresentação pesquisados nos passos anteriores. \\ 

De modo a complementar os dados para análise demográfica, tanto no questionário quanto na entrevista fizemos perguntas sobre a experiência com desenvolvimento de software, experiência com desenvolvimento de aplicativos Android nativos e quais linguagens de programação se consideravam proficientes.


\subsection{Impacto na Tendência a Mudanças e Defeitos}


Evidencias na literatura sugerem que cheiros de código de código podem esconder manutenibilidade de código e aumentar a tendência a mudanças e introdução de defeitos. Neste capítulo pretendemos avaliar o impacto dos cheiros de código propostos na tendência a mudanças e introdução de defeitos no código. Para isso conduziremos um experimento presencial com desenvolvedores Android.

Pretende-se conduzir um experimento apresentando aos desenvolvedores um projeto Android onde alguns deles receberão este projeto com os cheiros de código e outros o receberam com o código já refatorado. 

Será solicitado a todos que implementem uma mesma funcionalidade, esta do qual, necessitará alterar arquivos da camada de apresentação. Com este experimento pretendemos validar o impacto que os cheiros de código propostos tem na tendência a alteração de código e a introdução de defeitos.


\subsection{Percepção dos Desenvolvedores}
Após a definição de um catálogo de cheiros de código, pretende-se validar se desenvolvedores os percebem de fato como indicativos de trechos de códigos ruins. Para isso pretende-se conduzir um experimento apresentando aos desenvolvedores códigos com e sem os cheiros de código propostos, para cada código, será solicitado que ele indique o código como ``com cheiro'' ou ``sem cheiro''. 


\section{Atividades}

Para obter as ideias iniciais para a derivação dos cheiros de código na camada de apresentação Android, foi aplicado um questionário sobre boas e más práticas Android na comunidade de desenvolvedores do Brasil e exterior. O questionário pode ser encontrado no Apêndice A e até o momento da escrita desta proposta de qualificação foram coletadas 44 respostas. Ainda de modo a complementar os dados coletados com o questionário, pretende-se realizar entrevista com desenvolvedores Android sobre o mesmo tema. Também será desenvolvida uma análise para derivar os cheiros de código. Essa análise será feita com base em estratégias já utilizadas em trabalhos anteriores como o de Aniche et al. \cite{FinavaroAniche2016}. Para reduzir viés sobre os cheiros de código definidos, os mesmos serão validados com mais de um especialista em Android. A derivação dos cheiros de código está relacionada a Q1 definida na seção 1.1 e as atividades planejadas são:

\begin{itemize} 
	\item Bibliografia.
	\item Survey sobre Boas e Más práticas Android.
	\item Derivação dos cheiros de código.
	\item Validação de cheiros de código com especialista Android.
\end{itemize}

Evidências na literatura sugerem que cheiros de código de código podem dificultar manutenibilidade de código \cite{Sjoberg_Quantifying_2013, Yamashita6405287, Yamashita:2013:EII:2486788.2486878} e aumentar a tendência a mudanças e introdução de defeitos \cite{Khomh:2009:ESI:1685994.1686210, Khomh:2012:ESI:2158916.2158921}. Linares et al. \cite{DomainMatters} demonstra que \textit{antipatterns} impactam negativamente métricas relacionadas com a qualidade em projetos móveis, em particular métricas relacionadas com a propensão de falhas. Desta forma, pretende-se avaliar o impacto dos cheiros de código propostos na tendência a mudanças e introdução de defeitos no código. Para isso, será realizado um estudo de projetos com desenvolvedores Android. Este experimento está relacionado ao Q2 definida na Seção 1.1 e a atividade planejada é:

\begin{itemize} 
	\item Experimento sobre o Impacto em Mudanças/Defeitos.
\end{itemize}

Evidências na literatura também sugerem que cheiros de código de código são percebidos por desenvolvedores \cite{Palomba_Do_2014}, desta forma pretende-se avaliar se desenvolvedores Android percebem códigos afetados pelos cheiros de código propostos como indicativos de trechos de códigos ruins. Para isso será conduzido outro experimento também com desenvolvedores Android. Esse experimento está relacionado a Q3 definida na Seção 1.1 e a seguinte atividade está planejada:

\begin{itemize} 
	\item Experimento sobre a Percepção Desenvolvedores.
\end{itemize}


\section{Cronograma}

Na Tabela \ref{tab:Cronograma} são apresentadas as atividades previstas para a conclusão da dissertação bem como em qual período pretende-se realizá-la.

\begin{table}[h]
\centering

\newcommand\T{\rule{0pt}{2.6ex}}       % Top strut
\newcommand\B{\rule[-1.2ex]{0pt}{0pt}} % Bottom strut

\begin{tabular}{|l|cc|cccc|} 
\hline
\multicolumn{1}{|c|}{} 	& \multicolumn{2}{c|}{2016}   	& \multicolumn{4}{c|}{2017} \\
\textbf{Atividades}		& 3$^o$ Tri & 4$^o$ Tri 		& 1$^o$ Tri & 2$^o$ Tri & 3$^o$ Tri & 4$^o$ Tri \\
\hline
\hline
% \rule{0pt}{-1em} 		& 			& 					& 			& 			&			&			\\
Bibliografia e Trabalhos Relacionados 	& \textbullet 	& \textbullet	& 				& 				& 				& 				\T \\
Survey Boas e Más práticas Android 		& 				& \textbullet	& 				& 				& 				& 				\\
Entrevista Boas e Más práticas Android	& 				& 				& \textbullet	& 				& 				& 				\\
Derivação dos cheiros de código 				& 				& 				& \textbullet	& 				& 				& 				\\
Validação cheiros de código com Especialista	& 				& 				& \textbullet	& 				& 				& 				\\
Experimento Impacto em Mudanças/Defeitos	& 				& 				& 				& \textbullet	& 				& 				\\
Experimento Percepção Desenvolvedores	& 				& 				& 				& \textbullet 	& 				& 				\\
Escrita da Dissertação					& \textbullet	& \textbullet	& \textbullet	& \textbullet	& \textbullet	& \textbullet	\\
Defesa									& 				& 				& 				& 				& 				& \textbullet	\B \\
\hline
\end{tabular}
\caption{Cronograma de atividades propostas.}
\label{tab:Cronograma}
\end{table}
