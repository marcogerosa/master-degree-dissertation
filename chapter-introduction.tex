% -*- root: dissertacao.tex -*-
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setlength{\parindent}{20pt}
\setlength{\textheight}{22cm}
\setlength{\parskip}{0.2cm}
\linespread{1.2} % Para aumentar o espaçamento entre as linhas
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{Introdução}

Ao longo da última década o desenvolvimento de aplicativos móveis Android nativo (\emph{aplicativos Android}) atingiu um enorme sucesso \cite{Hecht2015}. A Google Play Store registra em Fevereiro de 2016 um total de 2 milhões de aplicativos e este crescimento vem acentuando-se ano após ano \cite{AppInPlayStore:09-16}. Desta forma, \emph{aplicativos Android} tem se tornado sistemas de software complexos que devem ser desenvolvidos rapidamente e evoluídos regularmente para se ajustarem aos requisitos de usuários, o que pode levar a escolhas ruins de design de código \cite{Hecht2015}. 

Para mitigar a deteorização do código, é comum desenvolvedores se apoiarem em ferramentas de detecção de maus cheiros como PMD \cite{PMD2016}, Sonarque \cite{Sonarqube2016} e JDeodoran \cite{TsantalisChaikalis2008} e algumas espcíficas para Android como Páprika \cite{Hecht2015} e Refactoring \cite{ReimannBrylski2013}, estas ferramentas geram relatórios indicando códigos bons e ruins. Existem também boas práticas reconhecidas de desenvolvimento de software. De fato, muitas destas ferramentas e prática podem ser aplicados aos projetos Android e colaboram no desenvolvimento de um software com qualidade, legível e de fácil manutenção. Porém, projetos Android trazem desafios adicionais principalmente com relação ao desenvolvimento da camada de apresentação onde sua estrutura mais se difere de projetos tradicionais \cite{Hecht2015}. 

Para entendermos estas particularidades, precisamos ter em mente a estrutura de um projeto Android. De forma simplificada, projetos Android possuem um diretório chamado \texttt{java} onde ficam as classes java. Um arquivo de configuração chamado \texttt{AndroidManifest.xml} que contém configurações tais como tela incial, permissões que serão solicitadas ao usuário, dentre outros. Por último, um diretório chamado \texttt{res}, abreviação para o termo \textit{resources}, que contém subpastas com nomes pré-determinados pelo Android onde cada subpasta contém arquivos que desempenham papéis específicos na aplicação, por exemplo, a subpasta \textsc{Layout} contém arquivos que representam a parte visual de telas do Android, a subpasta \textsc{Drawable} contém os elementos gráficos e assim por diante. 

O diretório \texttt{res} é uma particularidade de aplicações Android, não vemos este diretório em projetos tradicionais. Outra particularidade é com relação ao componente Android \textsc{Activity}, que representa uma tela \cite{AndroidActivities2016}. Estas classes respondem as interações do usuário com a tela, sempre estão vinculadas a um  \textsc{Layout} e normalmente precisam de acesso a classes do modelo da aplicação, ou seja, podem se tornar classes altamente acopladas. 

Nossa pesquisa busca identificar, através de questionários aplicados na comunidade de desenvolvimento Android, boas e más práticas para o desenvolvimento da camada de apresentação de projetos Android. Os dados obtidos com o questionário serão categorizados e extraídos maus cheiros de código. De forma a validar que os maus cheiros extraídos fazem sentido, iremos primeiramente validá-los com especialistas Android e depois realizar um experimento com desenvolvedores Android de forma a captar a percepção deles com relação aos maus cheiros definidos.

Atualmente já existe alguns maus cheiros especificos para Android catalogados. Num excelente trabalho desempenhado por FULANO, ele cataloga 30 maus cheiros com relação a utilização de recursos e experiência do usuário \cite{Hecht2015}, o que se difere da nossa pesquisa que busca identificar maus cheiros em termos de qualidade, legibilidade e manutenabilidade de código.

Ainda com relação a estudos já realizados, temos...

A camada de apresentação do Android possui uma estrutura bem específica, combinando código Java com arquivos \texttt{xml} que representam dos mais variados recursos como \textsc{Layout}'s, elementos gráficos, arquivos de internacionalização, dentre outros. Esta combinação torna o Android diferente de projetos tradicionais. E intensifica a necessidade de pesquisas focadas na plataforma.


\section{Motivação}\index{motivação}

Smartphones existem desde 1993 porém nesta época o foco era voltado para empresas e suas necessidades. Em 2007 houve o lançamento do iPhone fabricado pela Apple, o primeiro smartphone voltado ao público em geral. Ao final do mesmo ano o Google revelou seu sistema operacional para dispositivos móveis, o Android \cite{SmartSociety:13}. Desde então, esta plataforma vem, ano após ano, registrando um grande crescimento, ultrapassando outras plataformas \cite{AppInPlayStore:09-16} \cite{GrowthForecastIDC:16} \cite{IosVsAndroid:15}. 

No entanto, pesquisas em torno desta plataforma não crescem na mesma proporção \cite{Mannan_Dig_Ahmed_Jensen_Abdullah_Almurshed} e a ausência de um catálogo de maus cheiros de código espefícido para a plataforma Android pode resultar em (i) uma carência de conhecimento sobre boas e más práticas a ser compatilhado entre praticantes desta plataforma, (ii) indisponibilidade de ter uma ferramenta de detecção de maus cheiros de forma a alertar automaticamente os desenvolvedores da existência de maus cheiros de código, e (iii) ausência de estudo empírico sobre o ímpacto destas más práticas na manutenabilidade do código de projetos Android, por este motivos, boas e más práticas que são específicos a uma platadforma, no caso Android, tem emergido como tópicos de pesquisa sobre manutenção de código \cite{MvcSmells:16}.


\section{Questões da Pesquisa}

A questão primária desta pesquisa é \textbf{Quais são as boas e más práticas específicas à camada de apresentação em aplicações Android nativas?}. Para responder a esta questão, temos as seguintes questões secundárias:

\begin{itemize}
	\item \textbf{Q1: Quais são as classes que representam a camada de apresentação no Android?}
	
	Visto que não há registros de estudos que delimitam quais arquivos e tipos de classes representam a camada de apresentação no Android, o objetivo desta prmeira questão é, através de um questionário, definir, em termos desta pesquisa, quais elementos de um projeto Android representam a camada de apresentação.

	\item \textbf{Q2: Existe maus cheiros específicos para a camada de apresentação do Android?}
	
	Após delimitar exatamente quais elementos representam a camada de apresentação, pretende-se coletar, novamente através de um questionário, boas e más práticas utilziadas e/ou percebidas por desenvolvedores em cada elemento da camada de apresentação. Por exemplo, certamente aquivos do tipo \textsc{Layout} e \textsc{Activities} são fortes candidatos a serem parte da camada de apresentação do Android. Desta forma, para cada elemento identificado, serão feitas as seguintes perguntas:

	\begin{itemize}
		\item Você conhece ou utiliza alguma boa prática para lidar com X?
		\item Você considera algo uma má prática para lidar com X?
	\end{itemize}
	
	Onde ``X'' indica o elemento parte da camada de apresentação do Android. Estes dados serão analisados, categorizados e extraídos maus cheiros. Estes maus cheiros serão validados com especialistas em desenvolvimento Android.

	\item \textbf{Q3: Desenvolvedores percebem as classes afetadas pelos maus cheiros prpopostos como problemáticas?}
	
	Após a definição de um catálogo de maus cheiros, pretende-se validar se desenvolvedores os percebem de fato como indicativos de trechos de códigos ruins. Para isso pretende-se conduzir um experimento. [Completar aqui]

	Esta questão contempla duas subquestões sobre a relação dos maus cheiros e a tendência a mudanças e introdução de \textit{bugs} no projeto.

	\begin{itemize}
		\item \textbf{Q3.1: Qual a relação entre os maus cheiros propostos e o tendência a mudanças de classes?}
		\item \textbf{Q3.2: Qual a relação entre os maus cheiros propostos e o tendência a introdução de \textit{bugs} nas classes?}
	\end{itemize}
	
\end{itemize}

\section{Originalidade e Relevância}\index{originalidade}

Diversas pesquisas em torno de maus cheiros de código veem sendo realizadas ao longo dos últimos anos. Já existem inclusive diversos maus cheiros mapeados, porém poucos deles são específicos da plataforma Android \cite{Mannan_Dig_Ahmed_Jensen_Abdullah_Almurshed}. Segundo \cite{Hecht2015} estudos sobre maus cheiros de código sobre aplicações Android ainda estão em sua infância, porém ainda assim são muito relevantes inclusive notando-se que é mais comum identificar em aplicativos Android maus cheiros mapeados exclusivamente para esta plataforma do que os maus cheiros tradicionais \cite{DomainMatters}. 

